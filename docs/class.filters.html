<!DOCTYPE html>

<html>
<head>
  <title>class.filters.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="404.html">
                404.php
              </a>
            
              
              <a class="source" href="application.html">
                application.php
              </a>
            
              
              <a class="source" href="archive.html">
                archive.php
              </a>
            
              
              <a class="source" href="breadcrumbs.html">
                breadcrumbs.php
              </a>
            
              
              <a class="source" href="comments.html">
                comments.php
              </a>
            
              
              <a class="source" href="content-archive.html">
                content-archive.php
              </a>
            
              
              <a class="source" href="content-image.html">
                content-image.php
              </a>
            
              
              <a class="source" href="content-page.html">
                content-page.php
              </a>
            
              
              <a class="source" href="content-pdf.html">
                content-pdf.php
              </a>
            
              
              <a class="source" href="content.html">
                content.php
              </a>
            
              
              <a class="source" href="footer.html">
                footer.php
              </a>
            
              
              <a class="source" href="functions.html">
                functions.php
              </a>
            
              
              <a class="source" href="header-image.html">
                header-image.php
              </a>
            
              
              <a class="source" href="header.html">
                header.php
              </a>
            
              
              <a class="source" href="image.html">
                image.php
              </a>
            
              
              <a class="source" href="template-functions.html">
                template-functions.php
              </a>
            
              
              <a class="source" href="index.html">
                index.php
              </a>
            
              
              <a class="source" href="uw.html">
                uw.js
              </a>
            
              
              <a class="source" href="menu-mobile.html">
                menu-mobile.php
              </a>
            
              
              <a class="source" href="page.html">
                page.php
              </a>
            
              
              <a class="source" href="search.html">
                search.php
              </a>
            
              
              <a class="source" href="searchform.html">
                searchform.php
              </a>
            
              
              <a class="source" href="class.button-shortcode.html">
                class.button-shortcode.php
              </a>
            
              
              <a class="source" href="class.dropdowns_walker.html">
                class.dropdowns_walker.php
              </a>
            
              
              <a class="source" href="class.filters.html">
                class.filters.php
              </a>
            
              
              <a class="source" href="class.googleapps.html">
                class.googleapps.php
              </a>
            
              
              <a class="source" href="class.images.html">
                class.images.php
              </a>
            
              
              <a class="source" href="class.install.html">
                class.install.php
              </a>
            
              
              <a class="source" href="class.mimes.html">
                class.mimes.php
              </a>
            
              
              <a class="source" href="class.squish_bugs.html">
                class.squish_bugs.php
              </a>
            
              
              <a class="source" href="class.tile-box-shortcode.html">
                class.tile-box-shortcode.php
              </a>
            
              
              <a class="source" href="class.trumba-shortcode.html">
                class.trumba-shortcode.php
              </a>
            
              
              <a class="source" href="class.users.html">
                class.users.php
              </a>
            
              
              <a class="source" href="class.uw-carousel.html">
                class.uw-carousel.php
              </a>
            
              
              <a class="source" href="class.uw-directory.html">
                class.uw-directory.php
              </a>
            
              
              <a class="source" href="class.uw-documentation.html">
                class.uw-documentation.php
              </a>
            
              
              <a class="source" href="class.uw-dropdowns.html">
                class.uw-dropdowns.php
              </a>
            
              
              <a class="source" href="class.uw-enclosure.html">
                class.uw-enclosure.php
              </a>
            
              
              <a class="source" href="class.uw-iframes.html">
                class.uw-iframes.php
              </a>
            
              
              <a class="source" href="class.uw-media-caption.html">
                class.uw-media-caption.php
              </a>
            
              
              <a class="source" href="class.uw-media-credit.html">
                class.uw-media-credit.php
              </a>
            
              
              <a class="source" href="class.uw-oembeds.html">
                class.uw-oembeds.php
              </a>
            
              
              <a class="source" href="class.uw-page-attributes-meta-box.html">
                class.uw-page-attributes-meta-box.php
              </a>
            
              
              <a class="source" href="class.uw-quicklinks.html">
                class.uw-quicklinks.php
              </a>
            
              
              <a class="source" href="class.uw-replace-media.html">
                class.uw-replace-media.php
              </a>
            
              
              <a class="source" href="class.uw-scripts.html">
                class.uw-scripts.php
              </a>
            
              
              <a class="source" href="class.uw-shortcodes.html">
                class.uw-shortcodes.php
              </a>
            
              
              <a class="source" href="class.uw-styles.html">
                class.uw-styles.php
              </a>
            
              
              <a class="source" href="class.uw-tinymce.html">
                class.uw-tinymce.php
              </a>
            
              
              <a class="source" href="class.uw.html">
                class.uw.php
              </a>
            
              
              <a class="source" href="class.youtube-shortcode.html">
                class.youtube-shortcode.php
              </a>
            
              
              <a class="source" href="sidebar.html">
                sidebar.php
              </a>
            
              
              <a class="source" href="template-big-hero.html">
                template-big-hero.php
              </a>
            
              
              <a class="source" href="template-no-hero.html">
                template-no-hero.php
              </a>
            
              
              <a class="source" href="template-no-sidebar.html">
                template-no-sidebar.php
              </a>
            
              
              <a class="source" href="template-no-title.html">
                template-no-title.php
              </a>
            
              
              <a class="source" href="template-small-hero.html">
                template-small-hero.php
              </a>
            
              
              <a class="source" href="thinstrip.html">
                thinstrip.php
              </a>
            
              
              <a class="source" href="class.uw-blogroll.html">
                class.uw-blogroll.php
              </a>
            
              
              <a class="source" href="class.uw-campus-map.html">
                class.uw-campus-map.php
              </a>
            
              
              <a class="source" href="class.uw-intro.html">
                class.uw-intro.php
              </a>
            
              
              <a class="source" href="class.uw-recent-posts.html">
                class.uw-recent-posts.php
              </a>
            
              
              <a class="source" href="class.uw-related-posts.html">
                class.uw-related-posts.php
              </a>
            
              
              <a class="source" href="class.uw-rss.html">
                class.uw-rss.php
              </a>
            
              
              <a class="source" href="class.uw-sidebar.html">
                class.uw-sidebar.php
              </a>
            
              
              <a class="source" href="class.uw-single-image.html">
                class.uw-single-image.php
              </a>
            
              
              <a class="source" href="class.uw-top-posts.html">
                class.uw-top-posts.php
              </a>
            
              
              <a class="source" href="class.uw-twitter.html">
                class.uw-twitter.php
              </a>
            
              
              <a class="source" href="class.uw-widget-visibility.html">
                class.uw-widget-visibility.php
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>class.filters.php</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-preprocessor">&lt;?php</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>UW Filters</p>
<p>These are filters the UW 2014 theme adds and globally uses.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UW_Filters</span>
</span>{

  <span class="hljs-keyword">private</span> <span class="hljs-variable">$REPLACE_TEMPLATE_CLASS</span> = <span class="hljs-keyword">array</span>( <span class="hljs-string">'templatestemplate-'</span>, <span class="hljs-string">'-php'</span> );

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Custom UW Filters</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    add_filter( <span class="hljs-string">'italics'</span>, <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">'italicize'</span>) );
    add_filter( <span class="hljs-string">'abbreviation'</span>, <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">'abbreviate'</span>) );</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Global filters
Allow shortcodes in text widgets and excerpts</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    add_filter( <span class="hljs-string">'widget_text'</span>, <span class="hljs-string">'do_shortcode'</span> );
    add_filter( <span class="hljs-string">'the_excerpt'</span>, <span class="hljs-string">'do_shortcode'</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Add a better named template class to the</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    add_filter( <span class="hljs-string">'body_class'</span>, <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">'better_template_name_body_class'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Filters the category widget dropdown menu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    add_filter( <span class="hljs-string">'widget_categories_dropdown_args'</span>, <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">'custom_widget_classes'</span> ) );</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Modify the more text link</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    add_filter(<span class="hljs-string">'excerpt_more'</span>, <span class="hljs-string">'__return_false'</span> );
    add_filter(<span class="hljs-string">'the_excerpt'</span>, <span class="hljs-keyword">array</span>(<span class="hljs-variable">$this</span>, <span class="hljs-string">'excerpt_more_override'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>remove auto-paragraphs from shortcodes and keep it for content</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    remove_filter( <span class="hljs-string">'the_content'</span>, <span class="hljs-string">'wpautop'</span> );
    add_filter( <span class="hljs-string">'the_content'</span>, <span class="hljs-string">'wpautop'</span> , <span class="hljs-number">99</span>);
    add_filter( <span class="hljs-string">'the_content'</span>, <span class="hljs-string">'shortcode_unautop'</span>,<span class="hljs-number">100</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Multisite filters</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ( is_multisite() )
    {</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Add the site title to the body class</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      add_filter( <span class="hljs-string">'body_class'</span>, <span class="hljs-keyword">array</span>( <span class="hljs-variable">$this</span>, <span class="hljs-string">'add_site_title_body_class'</span> ) );
    }

  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add_site_title_body_class</span><span class="hljs-params">( <span class="hljs-variable">$classes</span> )</span>
  </span>{
    <span class="hljs-variable">$site</span> = array_filter( explode( <span class="hljs-string">'/'</span>, get_blog_details( get_current_blog_id() )<span class="hljs-variable">-&gt;path</span> ) );
    array_shift( <span class="hljs-variable">$site</span> );

    <span class="hljs-keyword">if</span> ( is_multisite() )
        <span class="hljs-variable">$classes</span>[] = <span class="hljs-string">'site-'</span>. sanitize_html_class( implode( <span class="hljs-string">'-'</span>, <span class="hljs-variable">$site</span> ) );

    <span class="hljs-keyword">return</span> <span class="hljs-variable">$classes</span>;

  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">better_template_name_body_class</span><span class="hljs-params">( <span class="hljs-variable">$classes</span> )</span>
  </span>{
    <span class="hljs-keyword">if</span> ( is_page_template() )
    {
      <span class="hljs-keyword">foreach</span>( <span class="hljs-variable">$classes</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$index</span>=&gt;<span class="hljs-variable">$class</span> )
      {
        <span class="hljs-variable">$classes</span>[ <span class="hljs-variable">$index</span> ] = str_replace( <span class="hljs-variable">$this</span><span class="hljs-variable">-&gt;REPLACE_TEMPLATE_CLASS</span>, <span class="hljs-string">''</span>, <span class="hljs-variable">$class</span> );
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$classes</span>;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">custom_widget_classes</span><span class="hljs-params">( <span class="hljs-variable">$args</span> )</span>
  </span>{
    <span class="hljs-variable">$args</span>[<span class="hljs-string">'class'</span> ] = <span class="hljs-string">'uw-select uw-select-wp'</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$args</span>;
  }

  <span class="hljs-comment">/**
   * Filter that returns the same content but with words from the
   *  Italicized words setting in italics.
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">italicize</span><span class="hljs-params">( <span class="hljs-variable">$content</span> )</span>
  </span>{

    <span class="hljs-variable">$words</span> = explode(<span class="hljs-string">' '</span>, get_option(<span class="hljs-string">'italicized_words'</span>) );

    <span class="hljs-keyword">if</span> ( <span class="hljs-number">1</span> == sizeof( <span class="hljs-variable">$words</span> ) )
    {
      <span class="hljs-keyword">echo</span> <span class="hljs-variable">$content</span>;
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-variable">$words</span> = array_filter(array_map(<span class="hljs-string">'trim'</span>, <span class="hljs-variable">$words</span>));

    <span class="hljs-variable">$regex</span> = <span class="hljs-string">'/\b('</span> . implode(<span class="hljs-string">"|"</span>, <span class="hljs-variable">$words</span>) . <span class="hljs-string">')\b/i'</span>;

    <span class="hljs-variable">$new_content</span> = preg_replace(<span class="hljs-variable">$regex</span>, <span class="hljs-string">"&lt;em&gt;$1&lt;/em&gt;"</span>, <span class="hljs-variable">$content</span>);

    <span class="hljs-keyword">if</span> ( in_array(<span class="hljs-string">'&amp;'</span>, <span class="hljs-variable">$words</span>) )
      <span class="hljs-variable">$new_content</span> = str_replace( <span class="hljs-keyword">array</span>( <span class="hljs-string">' &amp;#038; '</span>, <span class="hljs-string">' &amp; '</span>, <span class="hljs-string">' &amp;amp; '</span> ) , <span class="hljs-string">' &lt;em&gt;&amp;&lt;/em&gt; '</span>, <span class="hljs-variable">$new_content</span>);

    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$new_content</span>;

  }


  <span class="hljs-comment">/**
   * Returns the abbreviated title if it exists, otherwise the site title
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abbreviate</span><span class="hljs-params">( <span class="hljs-variable">$title</span> )</span>
  </span>{
     <span class="hljs-variable">$abbr</span> = get_option(<span class="hljs-string">'abbreviation'</span>);

     <span class="hljs-keyword">if</span> (! <span class="hljs-variable">$abbr</span> )
       <span class="hljs-keyword">return</span> <span class="hljs-variable">$title</span>;

     <span class="hljs-keyword">return</span> <span class="hljs-variable">$abbr</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>Adds a more link button to the end of the excerpt</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">excerpt_more_override</span><span class="hljs-params">(<span class="hljs-variable">$excerpt</span>)</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$excerpt</span> . <span class="hljs-string">'&lt;div&gt;&lt;a class="more" href="'</span> . get_permalink() . <span class="hljs-string">'"&gt;Read more&lt;/a&gt;&lt;/div&gt;'</span>;
  }
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
