<!DOCTYPE html>

<html>
<head>
  <title>uw.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="404.html">
                404.php
              </a>
            
              
              <a class="source" href="application.html">
                application.php
              </a>
            
              
              <a class="source" href="archive.html">
                archive.php
              </a>
            
              
              <a class="source" href="breadcrumbs.html">
                breadcrumbs.php
              </a>
            
              
              <a class="source" href="comments.html">
                comments.php
              </a>
            
              
              <a class="source" href="content-archive.html">
                content-archive.php
              </a>
            
              
              <a class="source" href="content-image.html">
                content-image.php
              </a>
            
              
              <a class="source" href="content-page.html">
                content-page.php
              </a>
            
              
              <a class="source" href="content-pdf.html">
                content-pdf.php
              </a>
            
              
              <a class="source" href="content.html">
                content.php
              </a>
            
              
              <a class="source" href="footer.html">
                footer.php
              </a>
            
              
              <a class="source" href="functions.html">
                functions.php
              </a>
            
              
              <a class="source" href="header-image.html">
                header-image.php
              </a>
            
              
              <a class="source" href="header.html">
                header.php
              </a>
            
              
              <a class="source" href="image.html">
                image.php
              </a>
            
              
              <a class="source" href="template-functions.html">
                template-functions.php
              </a>
            
              
              <a class="source" href="index.html">
                index.php
              </a>
            
              
              <a class="source" href="uw.html">
                uw.js
              </a>
            
              
              <a class="source" href="menu-mobile.html">
                menu-mobile.php
              </a>
            
              
              <a class="source" href="page.html">
                page.php
              </a>
            
              
              <a class="source" href="search.html">
                search.php
              </a>
            
              
              <a class="source" href="searchform.html">
                searchform.php
              </a>
            
              
              <a class="source" href="class.button-shortcode.html">
                class.button-shortcode.php
              </a>
            
              
              <a class="source" href="class.dropdowns_walker.html">
                class.dropdowns_walker.php
              </a>
            
              
              <a class="source" href="class.filters.html">
                class.filters.php
              </a>
            
              
              <a class="source" href="class.googleapps.html">
                class.googleapps.php
              </a>
            
              
              <a class="source" href="class.images.html">
                class.images.php
              </a>
            
              
              <a class="source" href="class.install.html">
                class.install.php
              </a>
            
              
              <a class="source" href="class.mimes.html">
                class.mimes.php
              </a>
            
              
              <a class="source" href="class.squish_bugs.html">
                class.squish_bugs.php
              </a>
            
              
              <a class="source" href="class.tile-box-shortcode.html">
                class.tile-box-shortcode.php
              </a>
            
              
              <a class="source" href="class.trumba-shortcode.html">
                class.trumba-shortcode.php
              </a>
            
              
              <a class="source" href="class.users.html">
                class.users.php
              </a>
            
              
              <a class="source" href="class.uw-carousel.html">
                class.uw-carousel.php
              </a>
            
              
              <a class="source" href="class.uw-directory.html">
                class.uw-directory.php
              </a>
            
              
              <a class="source" href="class.uw-documentation.html">
                class.uw-documentation.php
              </a>
            
              
              <a class="source" href="class.uw-dropdowns.html">
                class.uw-dropdowns.php
              </a>
            
              
              <a class="source" href="class.uw-enclosure.html">
                class.uw-enclosure.php
              </a>
            
              
              <a class="source" href="class.uw-iframes.html">
                class.uw-iframes.php
              </a>
            
              
              <a class="source" href="class.uw-media-caption.html">
                class.uw-media-caption.php
              </a>
            
              
              <a class="source" href="class.uw-media-credit.html">
                class.uw-media-credit.php
              </a>
            
              
              <a class="source" href="class.uw-oembeds.html">
                class.uw-oembeds.php
              </a>
            
              
              <a class="source" href="class.uw-page-attributes-meta-box.html">
                class.uw-page-attributes-meta-box.php
              </a>
            
              
              <a class="source" href="class.uw-quicklinks.html">
                class.uw-quicklinks.php
              </a>
            
              
              <a class="source" href="class.uw-replace-media.html">
                class.uw-replace-media.php
              </a>
            
              
              <a class="source" href="class.uw-scripts.html">
                class.uw-scripts.php
              </a>
            
              
              <a class="source" href="class.uw-shortcodes.html">
                class.uw-shortcodes.php
              </a>
            
              
              <a class="source" href="class.uw-styles.html">
                class.uw-styles.php
              </a>
            
              
              <a class="source" href="class.uw-tinymce.html">
                class.uw-tinymce.php
              </a>
            
              
              <a class="source" href="class.uw.html">
                class.uw.php
              </a>
            
              
              <a class="source" href="class.youtube-shortcode.html">
                class.youtube-shortcode.php
              </a>
            
              
              <a class="source" href="sidebar.html">
                sidebar.php
              </a>
            
              
              <a class="source" href="template-big-hero.html">
                template-big-hero.php
              </a>
            
              
              <a class="source" href="template-no-hero.html">
                template-no-hero.php
              </a>
            
              
              <a class="source" href="template-no-sidebar.html">
                template-no-sidebar.php
              </a>
            
              
              <a class="source" href="template-no-title.html">
                template-no-title.php
              </a>
            
              
              <a class="source" href="template-small-hero.html">
                template-small-hero.php
              </a>
            
              
              <a class="source" href="thinstrip.html">
                thinstrip.php
              </a>
            
              
              <a class="source" href="class.uw-blogroll.html">
                class.uw-blogroll.php
              </a>
            
              
              <a class="source" href="class.uw-campus-map.html">
                class.uw-campus-map.php
              </a>
            
              
              <a class="source" href="class.uw-intro.html">
                class.uw-intro.php
              </a>
            
              
              <a class="source" href="class.uw-recent-posts.html">
                class.uw-recent-posts.php
              </a>
            
              
              <a class="source" href="class.uw-related-posts.html">
                class.uw-related-posts.php
              </a>
            
              
              <a class="source" href="class.uw-rss.html">
                class.uw-rss.php
              </a>
            
              
              <a class="source" href="class.uw-sidebar.html">
                class.uw-sidebar.php
              </a>
            
              
              <a class="source" href="class.uw-single-image.html">
                class.uw-single-image.php
              </a>
            
              
              <a class="source" href="class.uw-top-posts.html">
                class.uw-top-posts.php
              </a>
            
              
              <a class="source" href="class.uw-twitter.html">
                class.uw-twitter.php
              </a>
            
              
              <a class="source" href="class.uw-widget-visibility.html">
                class.uw-widget-visibility.php
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>uw.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <pre><code>UW.js <span class="hljs-number">0.1</span>
uw.edu/marketing/web/
A UW JavaScript library that implements various web components to any site
Includes hard dependencies jQuery (v2<span class="hljs-number">.1</span><span class="hljs-number">.1</span>), Backbone (<span class="hljs-number">1.1</span><span class="hljs-number">.2</span>), and Underscore (<span class="hljs-number">1.6</span><span class="hljs-number">.0</span>)
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>
;(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
;<span class="hljs-comment">// Baseline setup</span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Establish the root object <code>window</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> root = <span class="hljs-keyword">this</span></pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Create a safe reference to the UW object which will be used to establish the global UW object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> UW = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(obj)</span>
</span>{
    <span class="hljs-keyword">if</span> ( obj <span class="hljs-keyword">instanceof</span> UW ) <span class="hljs-keyword">return</span> obj

    <span class="hljs-keyword">if</span> ( ! ( <span class="hljs-keyword">this</span> <span class="hljs-keyword">instanceof</span> UW )) <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW(obj)

    <span class="hljs-keyword">this</span>._wrapped = obj
};</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Establish the global UW object <code>window.UW</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>root.UW = UW</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Current version</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>UW.VERSION = <span class="hljs-string">'0.1'</span>
;<span class="hljs-comment">// List out the classes that each component searches for</span>
UW.elements = {

  alert : <span class="hljs-string">'.uw-thinstrip'</span>,
  accordion  : <span class="hljs-string">'.uw-accordion'</span>,
  dropdowns  : <span class="hljs-string">'#dawgdrops'</span>,
  images : <span class="hljs-string">'a &gt; img'</span>,
  mobilemenu : <span class="hljs-string">'.uw-mobile-menu-toggle'</span>,
  radio      : <span class="hljs-string">':radio'</span>,
  search     : <span class="hljs-string">'.uw-search'</span>,
  select     : <span class="hljs-string">'.uw-select'</span>,
  quicklinks : <span class="hljs-string">'.uw-quicklinks'</span>,
  slideshow  : <span class="hljs-string">'.uw-slideshow'</span>,
  social     : <span class="hljs-string">'.uw-social'</span>,
  vimeo      : <span class="hljs-string">'.uw-vimeo'</span>,
  youtube    : <span class="hljs-string">'.uw-youtube'</span>

}

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span>(uw) !== <span class="hljs-string">'undefined'</span>) {
    UW.baseUrl = uw.siteUrl;
}
<span class="hljs-keyword">else</span> {
    UW.baseUrl = Backbone.history.location.origin + <span class="hljs-string">'/'</span> +
                _.first( _.compact( Backbone.history.location.pathname.split(<span class="hljs-string">'/'</span>) ) ) + <span class="hljs-string">'/'</span>;
}

UW.sources = {
  quicklinks : UW.baseUrl + <span class="hljs-string">'wp-admin/admin-ajax.php?action=quicklinks'</span>,
  search     : UW.baseUrl + <span class="hljs-string">'wp-admin/admin-ajax.php'</span>
}</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Initialize all components when the DOM is ready</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>UW.initialize = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( $ )</span>
</span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Cache common elements that each javascript module calls</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  UW.$body       = $(<span class="hljs-string">'body'</span>);
  UW.$<span class="hljs-built_in">window</span>   = $( <span class="hljs-built_in">window</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>UW Utilities</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  UW.dropdowns  = _.map( $( UW.elements.dropdowns ),     <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Dropdowns({ el : element }) } )
  UW.mobilemenu = _.map( $( UW.elements.mobilemenu ),     <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.MobileMenu({ el : element }) } )
  UW.quicklinks = _.map( $( UW.elements.quicklinks ),    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.QuickLinks( { el : element, url : UW.sources.quicklinks }) } )
  UW.search     = _.map( $( UW.elements.search ),    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Search( { el : element, model : <span class="hljs-keyword">new</span> UW.Search.DirectoryModel( {url: UW.sources.search}) }) } )
  UW.images   = _.map( $( UW.elements.images ),    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Image({ el : element }) } )</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>UW Modules</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  UW.slideshows = _.map( $( UW.elements.slideshow ), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Slideshow( { el : element }) } )
  UW.social     = _.map( $( UW.elements.social ),    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Social({ el : element }) } )
  UW.vimeo      = _.map( $( UW.elements.vimeo ),     <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Vimeo({ el : element }) } )
  UW.youtube    = _.map( $( UW.elements.youtube ),   <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.YouTube.Collection({ el: element})})</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>UW Components - These need to render after all other javascript elements are rendered on page</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  UW.accordion  = _.map( $( UW.elements.accordion ), <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Accordion( { el : element }) } )
  UW.radio      = _.map( $( UW.elements.radio ),     <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Radio({ el : element }) } )
  UW.select     = _.map( $( UW.elements.select ),    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> UW.Select({ el : element }) } )

  UW.alert = <span class="hljs-keyword">new</span> UW.Alert({ after: UW.elements.alert, model: <span class="hljs-keyword">new</span> UW.Alert.Model() });</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>todo: add to separate file</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  $(<span class="hljs-string">'table'</span>).addClass(<span class="hljs-string">'table table-striped'</span>)

}

jQuery(<span class="hljs-built_in">document</span>).ready( UW.initialize )</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <h2 id="basic-uw-components">Basic UW Components</h2>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>;UW.Alert = Backbone.View.extend({

  alert : <span class="hljs-string">'#uwalert-alert-message'</span>,

  events : {
    <span class="hljs-string">'click .close'</span> : <span class="hljs-string">'hide'</span>
  },

  template : <span class="hljs-string">'&lt;div id="uwalert-alert-message" class="&lt;% _.each( categories, function( category ) { %&gt; &lt;%= category.slug %&gt; &lt;% }) %&gt;"&gt;&lt;div class="container"&gt;&lt;span class="close"&gt;Close&lt;/span&gt;&lt;h1&gt;&lt;%= title %&gt;&lt;/h1&gt;&lt;p&gt;&lt;%= excerpt %&gt;&lt;a class="more" href="http://emergency.uw.edu" title="&lt;%= title %&gt;"&gt;More info&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;'</span>,

  initialize  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'render'</span>, <span class="hljs-string">'hide'</span> )
    <span class="hljs-keyword">this</span>.options = _.extend( {}, options )
    <span class="hljs-keyword">this</span>.model.on( <span class="hljs-string">'sync'</span>, <span class="hljs-keyword">this</span>.render )
  },

  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.model.get(<span class="hljs-string">'title'</span>))
     {
      $(<span class="hljs-keyword">this</span>.options.after).after( _.template( <span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.model.toJSON() ) )
      <span class="hljs-keyword">this</span>.setElement( $( <span class="hljs-keyword">this</span>.alert ) )
    }
  },

  hide : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$el.remove()
  }

})

UW.Alert.Model = Backbone.Model.extend({

  alerts :  [
    <span class="hljs-string">'red-alert-urgent'</span>,
    <span class="hljs-string">'orange-alert'</span>,
    <span class="hljs-string">'steel-alert-fyis'</span>,
  ],

  data  : {
    c : <span class="hljs-string">'?'</span>,
    test : <span class="hljs-literal">true</span>,
    number:<span class="hljs-number">1</span>,
    type:<span class="hljs-string">'post'</span>,
    status:<span class="hljs-string">'publish'</span>,
    dataType: <span class="hljs-string">'json'</span>
  },

  url : Backbone.history.location.protocol + <span class="hljs-string">'//public-api.wordpress.com/rest/v1/sites/uwemergency.wordpress.com/posts/'</span>,

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.fetch( { data : <span class="hljs-keyword">this</span>.data })
  },

  parse: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(data)</span>
  </span>{
    <span class="hljs-keyword">var</span> post = _.first( data.posts )
    _.extend( post.categories, {alert: { slug : <span class="hljs-built_in">window</span>.location.hash.replace(<span class="hljs-string">'#'</span>,<span class="hljs-string">''</span>) } } )
    <span class="hljs-keyword">if</span> ( _.intersection( _.pluck(  post.categories, <span class="hljs-string">'slug'</span> ), <span class="hljs-keyword">this</span>.alerts ).length || post.categories.alert.slug.indexOf( <span class="hljs-string">'uwalert'</span> ) !== -<span class="hljs-number">1</span> )
      <span class="hljs-keyword">return</span> post
  }

});;<span class="hljs-comment">// ### UW Search</span></pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>This function creates a UW Search
For usage please refer to the <a href="http://uw.edu/brand/web/#search">UW Web Components Search</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.Search = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>This property caches the current value in the search field so the same search doesn’t execute multiple times.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  value : <span class="hljs-string">''</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>These are the three search options: the UW, the current site and the directory</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  searchFeatures : {
    uw        : <span class="hljs-string">'uw'</span>,
    site      : <span class="hljs-string">'site'</span>,
    directory : <span class="hljs-string">'directory'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>This is the HTML for the search bar that is preprended to the body tag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  searchbar : <span class="hljs-string">'&lt;div id="uwsearcharea" class="uw-search-bar-container"&gt;'</span>+
               <span class="hljs-string">'&lt;div class="container"&gt;'</span>+
                  <span class="hljs-string">'&lt;div class="center-block uw-search-wrapper"&gt;'</span>+
                    <span class="hljs-string">'&lt;form class="uw-search" action="&lt;%= Backbone.history.location.pathname %&gt;"&gt;'</span>+
                      <span class="hljs-string">'&lt;input id="uw-search-bar" type="search" name="s" value="" autocomplete="off" tabindex="-1"/&gt;'</span>+
                    <span class="hljs-string">'&lt;/form&gt;'</span>+

                    <span class="hljs-string">'&lt;select id="mobile-search-select" class="visible-xs"&gt;'</span> +
                      <span class="hljs-string">'&lt;option value="uw" selected&gt;All the UW&lt;/option&gt;'</span> +
                      <span class="hljs-string">'&lt;option value="site"&gt;Current Site&lt;/option&gt;'</span> +
                      <span class="hljs-string">'&lt;option value="directory"&gt;People Directory&lt;/option&gt;'</span> +
                    <span class="hljs-string">'&lt;/select&gt;'</span> +

                    <span class="hljs-string">'&lt;button class="search" tabindex="-1"/&gt;'</span>+

                    <span class="hljs-string">'&lt;div class="labels hidden-xs"&gt;'</span>+
                      <span class="hljs-string">'&lt;label class="radio"&gt;'</span>+
                        <span class="hljs-string">'&lt;input type="radio" name="search" value="uw" data-toggle="radio" checked tabindex="-1"&gt;'</span>+
                        <span class="hljs-string">'All the UW'</span>+
                      <span class="hljs-string">'&lt;/label&gt;'</span>+

                      <span class="hljs-string">'&lt;label class="radio"&gt;'</span>+
                        <span class="hljs-string">'&lt;input type="radio" name="search" value="site" data-toggle="radio" tabindex="-1"&gt;'</span>+
                        <span class="hljs-string">'Current Site'</span>+
                      <span class="hljs-string">'&lt;/label&gt;'</span>+

                      <span class="hljs-string">'&lt;label class="radio"&gt;'</span>+
                        <span class="hljs-string">'&lt;input type="radio" name="search" value="directory" data-toggle="radio" tabindex="-1"&gt;'</span>+
                        <span class="hljs-string">'People Directory'</span>+
                      <span class="hljs-string">'&lt;/label&gt;'</span>+
                    <span class="hljs-string">'&lt;/div&gt;'</span>+

                <span class="hljs-string">'&lt;div class="uw-results" style="display:none;"&gt;'</span> +
                   <span class="hljs-string">'&lt;p class="more-results"&gt;Need more results? Try the &lt;a href="http://www.washington.edu/home/peopledir/" title="Full directory"&gt;full directory&lt;/a&gt;&lt;/p&gt;'</span> +
                <span class="hljs-string">'&lt;/div&gt;'</span> +

                <span class="hljs-string">'&lt;/div&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>+
            <span class="hljs-string">'&lt;/div&gt;'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>The HTML template for a single search result. Only the information that is available will be shown.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  result :  <span class="hljs-string">'&lt;div class="result"&gt;'</span> +
              <span class="hljs-string">'&lt;h4 class="commonname"&gt;&lt;%= commonname %&gt;&lt;/h4&gt;'</span>+
              <span class="hljs-string">'&lt;a href="#" title="&lt;%= commonname %&gt;" class="directory-more"&gt;More&lt;/a&gt;'</span>+
              <span class="hljs-string">'&lt;div class="information hidden"&gt;'</span>+
                <span class="hljs-string">'&lt;p class="pull-left"&gt;&lt;% if ( title ) { %&gt;&lt;span class="title"&gt;&lt;%= title %&gt;&lt;/span&gt;&lt;% } %&gt;'</span>+
                <span class="hljs-string">'&lt;% if ( postaladdress ) { %&gt;&lt;span class="postaladdress"&gt;&lt;%= postaladdress %&gt;&lt;/span&gt;&lt;% } %&gt;&lt;/p&gt;'</span>+
                <span class="hljs-string">'&lt;% if ( mail ) { %&gt;&lt;span class="mail"&gt;&lt;a href="mailto:&lt;%= mail %&gt;" title="Email &lt;%= commonname %&gt;"&gt;&lt;%= mail %&gt;&lt;/a&gt;&lt;/span&gt;&lt;% } %&gt;'</span>+
                <span class="hljs-string">'&lt;% if ( telephonenumber ) { %&gt;&lt;span class="telephonenumber"&gt;&lt;a href="tel:&lt;%= telephonenumber %&gt;"&gt;&lt;%= telephonenumber %&gt;&lt;/a&gt;&lt;/span&gt;&lt;% } %&gt;'</span>+
              <span class="hljs-string">'&lt;/div&gt;'</span>+
            <span class="hljs-string">'&lt;/div&gt;'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Default values. The <code>limit</code> refers to the minimum number characters needed before an ajax search is performed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  defaults :
  {
    limit : <span class="hljs-number">2</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>List of events
A keydown on the input field will trigger an ajax search if more than two characters are present.
Clicking on a result’s more icon or name unveil more information
Toggling the radio buttons changes the function of the search bar from searhing the UW, searching the current site and searching the directory.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  events :
  {
    <span class="hljs-string">'keydown'</span>                   : <span class="hljs-string">'keyDownDispatch'</span>,
    <span class="hljs-string">'click .result .more'</span>       : <span class="hljs-string">'showPersonInformation'</span>,
    <span class="hljs-string">'click .result .commonname'</span> : <span class="hljs-string">'showPersonInformation'</span>,
    <span class="hljs-string">'click label.radio'</span>         : <span class="hljs-string">'toggleSearchFeature'</span>,
    <span class="hljs-string">'click input:radio'</span>         : <span class="hljs-string">'stopProp'</span>,
    <span class="hljs-string">'change select'</span>             : <span class="hljs-string">'toggleSearchFeature'</span>,
    <span class="hljs-string">'keyup #uw-search-bar'</span>      : <span class="hljs-string">'searchDirectory'</span>,
    <span class="hljs-string">'click .search'</span>             : <span class="hljs-string">'submitForm'</span>,
    <span class="hljs-string">'submit form'</span>               : <span class="hljs-string">'submitSearch'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>Initialize the view and bind events to to the DirectoryModel <code>results</code> attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize :<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( options )</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'toggleSearchBar'</span>, <span class="hljs-string">'toggleBlur'</span>, <span class="hljs-string">'keyDownDispatch'</span>, <span class="hljs-string">'searchDirectory'</span>, <span class="hljs-string">'parse'</span> );

    <span class="hljs-keyword">this</span>.settings = _.extend( {}, <span class="hljs-keyword">this</span>.defaults , <span class="hljs-keyword">this</span>.$el.data() , options )

    <span class="hljs-keyword">this</span>.$searchbar = $( _.template( <span class="hljs-keyword">this</span>.searchbar , <span class="hljs-keyword">this</span>.settings ) )

    <span class="hljs-keyword">this</span>.render()

    <span class="hljs-keyword">this</span>.$results  = <span class="hljs-keyword">this</span>.$( <span class="hljs-string">'.uw-results'</span> )
    <span class="hljs-keyword">this</span>.$more    = <span class="hljs-keyword">this</span>.$( <span class="hljs-string">'.more-results'</span> )

    <span class="hljs-keyword">this</span>.searchFeature = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">':radio:checked'</span>).val()

    <span class="hljs-keyword">this</span>.model.on( <span class="hljs-string">'change:results'</span>, <span class="hljs-keyword">this</span>.parse, <span class="hljs-keyword">this</span> )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>Render the search bar above the <code>body</code> element and set the view element to the search bar HTML
since most events take place within that view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    UW.$body.prepend( <span class="hljs-keyword">this</span>.$searchbar )

    <span class="hljs-keyword">this</span>.$toggle = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'button'</span>);
    <span class="hljs-keyword">this</span>.$toggle.bind( {
        <span class="hljs-string">'click'</span>: <span class="hljs-keyword">this</span>.toggleSearchBar,
        <span class="hljs-string">'blur'</span>: <span class="hljs-keyword">this</span>.toggleBlur
        } );

    <span class="hljs-keyword">this</span>.setElement( <span class="hljs-keyword">this</span>.$searchbar )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>This shows and hides the search</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  toggleSearchBar: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.hideDirectory()
    <span class="hljs-keyword">this</span>.$searchbar.toggleClass(<span class="hljs-string">'open'</span>)
    UW.$body.toggleClass( <span class="hljs-string">'search-open'</span> )
    <span class="hljs-keyword">this</span>.toggleBlur();
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  toggleBlur: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$searchbar.hasClass(<span class="hljs-string">'open'</span>)) {
        <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'#uw-search-bar'</span>).focus();
    }
  },

  keyDownDispatch: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
  </span>{
    <span class="hljs-keyword">if</span> (event.keyCode == <span class="hljs-number">27</span>){
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$searchbar.hasClass(<span class="hljs-string">'open'</span>)){
            <span class="hljs-keyword">this</span>.toggleSearchBar();
            <span class="hljs-keyword">this</span>.$toggle.focus();
        }
    }
    <span class="hljs-keyword">else</span>{
        <span class="hljs-keyword">var</span> $target = $(event.target);
        <span class="hljs-keyword">if</span> ($target.is(<span class="hljs-string">':radio'</span>)) {
            <span class="hljs-keyword">if</span> ((event.keyCode == <span class="hljs-number">13</span>) || (event.keyCode == <span class="hljs-number">32</span>)){
                $target.parent(<span class="hljs-string">'label'</span>).trigger(<span class="hljs-string">'click'</span>);
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.keyCode == <span class="hljs-number">9</span>) {
                event.preventDefault();
                <span class="hljs-keyword">this</span>.$toggle.focus();
                $checked = <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'input[value='</span> + <span class="hljs-keyword">this</span>.searchFeature + <span class="hljs-string">']'</span>);
                <span class="hljs-keyword">if</span> (!$checked.parent(<span class="hljs-string">'label'</span>).hasClass(<span class="hljs-string">'checked'</span>)){
                    <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'label'</span>).removeClass(<span class="hljs-string">'checked'</span>);
                    $checked.parent(<span class="hljs-string">'label'</span>).addClass(<span class="hljs-string">'checked'</span>);
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($target.is(<span class="hljs-string">'#uw-search-bar'</span>)){
            <span class="hljs-keyword">if</span> (event.keyCode == <span class="hljs-number">9</span>) {
                event.preventDefault();
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$more.is(<span class="hljs-string">':visible'</span>)){
                    <span class="hljs-keyword">this</span>.$more.find(<span class="hljs-string">'a'</span>).focus();
                }
                <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'input[value='</span> + <span class="hljs-keyword">this</span>.searchFeature + <span class="hljs-string">']'</span>).focus();
                }
            }
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ($target.is(<span class="hljs-keyword">this</span>.$more.find(<span class="hljs-string">'a'</span>)) &amp;&amp; event.keyCode == <span class="hljs-number">9</span>){
            event.preventDefault();
            <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'input[value='</span> + <span class="hljs-keyword">this</span>.searchFeature + <span class="hljs-string">']'</span>).focus();
        }
    }
  },

  stopProp: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(event)</span>
  </span>{
    event.stopPropagation();
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Set a property to the current radio button indicating which function the search bar is providing.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  toggleSearchFeature : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">this</span>.hideDirectory()
    <span class="hljs-keyword">var</span> value = e.currentTarget.childNodes[<span class="hljs-number">1</span>].value;
    <span class="hljs-keyword">this</span>.searchFeature = value
    _.defer(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($searchbar)</span> </span>{ $searchbar.find(<span class="hljs-string">'#uw-search-bar'</span>).focus() }, <span class="hljs-keyword">this</span>.$searchbar);
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.searchFeature === <span class="hljs-keyword">this</span>.searchFeatures.directory )
      <span class="hljs-keyword">this</span>.showDirectory()</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>this.mirrorSelectAndRadioElements()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  },</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>mirrorSelectAndRadioElements : function()
{
},</p>

            </div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>If the search bar is not searching the directiory behave like a normal search function and don’t cancel
the submit event.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  submitSearch : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">switch</span> ( <span class="hljs-keyword">this</span>.searchFeature )
    {
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.searchFeatures.uw :
        <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'input'</span>).attr(<span class="hljs-string">'name'</span>, <span class="hljs-string">'q'</span>)
        <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'form'</span>).attr(<span class="hljs-string">'action'</span>, <span class="hljs-string">'http://uw.edu/search/'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.searchFeatures.site :
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  },

  submitForm : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$searchbar.find(<span class="hljs-string">'form'</span>).submit()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>Check if a new search is in the searchbar, enough characters are in the searchbar and that there it
a term to search for. If all three of these checks pass, cache the search term and perform the search.
Note: this functino is debounced by 200ms to limit the number of searches triggered within that time period to one.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  searchDirectory : _.debounce( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span> </span>{

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.value === e.target.value ) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">if</span> ( e.target.value.length &lt; <span class="hljs-keyword">this</span>.settings.limit ) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.empty()
    <span class="hljs-keyword">if</span> ( ! e.target.value.length ) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.empty()

    <span class="hljs-keyword">this</span>.value = e.target.value

    <span class="hljs-keyword">this</span>.model.search( <span class="hljs-keyword">this</span>.value )

  }, <span class="hljs-number">200</span> ),

  hideDirectory : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$results.hide()
  },

  showDirectory : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$results.show()
    <span class="hljs-keyword">this</span>.$more.show()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Empty the search results.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  empty : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$results.empty()
      .append( <span class="hljs-keyword">this</span>.$more.hide() )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>Parse the search results. The LDAP response from the server is first parsed by custom PHP and then
the new JSON feed is rendered here in the view.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  parse : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( response )</span>
  </span>{
    <span class="hljs-keyword">var</span> data = response.attributes.results
      , result   = <span class="hljs-keyword">this</span>.result
      , $results = <span class="hljs-keyword">this</span>.$results


    <span class="hljs-keyword">this</span>.empty()

    _.each(data, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( person, index )</span> </span>{
      <span class="hljs-keyword">if</span> ( person.commonname )
      {
        <span class="hljs-keyword">var</span> template = _.template( result, person )
        $results.prepend( template )
      }
    })

  },</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Reveal or hide the directory more information.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  showPersonInformation : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">this</span>.$( e.currentTarget )
      .closest(<span class="hljs-string">'.result'</span>)
        .toggleClass(<span class="hljs-string">'open'</span>)
      .find(<span class="hljs-string">'.information'</span>)
        .toggleClass( <span class="hljs-string">'hidden'</span> )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }


})

UW.Search.DirectoryModel = Backbone.Model.extend({

  settings : {
    action : <span class="hljs-string">'directory'</span>,
    search : <span class="hljs-string">''</span>
  },

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{
    <span class="hljs-keyword">this</span>.url = options.url;
  },

  search : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( value )</span> </span>{
    <span class="hljs-keyword">this</span>.settings.search = value
    <span class="hljs-keyword">this</span>.fetch( { data : <span class="hljs-keyword">this</span>.settings })
  },

  parse : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( response )</span> </span>{
    <span class="hljs-keyword">if</span> ( response )
        <span class="hljs-keyword">this</span>.set( <span class="hljs-string">'results'</span>, response )
  }

})
;<span class="hljs-comment">// This section builds and populates the quicklinks section (off-canvas right)</span>

UW.QuickLinks = Backbone.View.extend({

    DELAY : <span class="hljs-number">500</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>todo: the default list and these elements could be put into the php templates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    container: <span class="hljs-string">'#uw-container'</span>,

    template : <span class="hljs-string">'&lt;nav id="quicklinks" role="navigation" aria-label="quick links" aria-hidden="true"&gt;'</span> +
                        <span class="hljs-string">'&lt;ul id="big-links"&gt;'</span> +
                            <span class="hljs-string">'&lt;% _.each( links, function( link ) { %&gt; '</span> +
                                <span class="hljs-string">'&lt;% if (link.classes) { %&gt;'</span> +
                                    <span class="hljs-string">'&lt;li&gt;'</span> +
                                        <span class="hljs-string">'&lt;span class="&lt;%= link.classes %&gt;"&gt;&lt;/span&gt;'</span> +
                                        <span class="hljs-string">'&lt;a href="&lt;%= link.url %&gt;" tabindex="-1"&gt;&lt;%= link.title %&gt;&lt;/a&gt;'</span> +
                                    <span class="hljs-string">'&lt;/li&gt;'</span> +
                                <span class="hljs-string">'&lt;% } %&gt;'</span> +
                            <span class="hljs-string">'&lt;% }) %&gt;'</span> +
                        <span class="hljs-string">'&lt;/ul&gt;'</span> +
                        <span class="hljs-string">'&lt;h3&gt;Helpful Links&lt;/h3&gt;'</span> +
                        <span class="hljs-string">'&lt;ul id="little-links"&gt;'</span> +
                            <span class="hljs-string">'&lt;% _.each( links, function( link ) { %&gt; '</span>+
                                <span class="hljs-string">'&lt;% if ( ! link.classes) { %&gt;'</span> +
                                    <span class="hljs-string">'&lt;li&gt;'</span> +
                                        <span class="hljs-string">'&lt;span class="&lt;%= link.classes %&gt;"&gt;&lt;/span&gt;'</span> +
                                        <span class="hljs-string">'&lt;a href="&lt;%= link.url %&gt;" tabindex="-1"&gt;&lt;%= link.title %&gt;&lt;/a&gt;'</span> +
                                    <span class="hljs-string">'&lt;/li&gt;'</span> +
                                <span class="hljs-string">'&lt;% } %&gt;'</span> +
                            <span class="hljs-string">'&lt;% }) %&gt;'</span> +
                        <span class="hljs-string">'&lt;/ul&gt;'</span> +
                    <span class="hljs-string">'&lt;/nav&gt;'</span>,

    events: {
       <span class="hljs-string">'click'</span>           : <span class="hljs-string">'animate'</span>,
       <span class="hljs-string">'touchstart'</span>   : <span class="hljs-string">'animate'</span>,
       <span class="hljs-string">'keyup'</span>         : <span class="hljs-string">'animate'</span>,
       <span class="hljs-string">'blur button'</span> : <span class="hljs-string">'loop'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>‘keydown button’ : ‘testShiftKey’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    },</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>testShiftKey : function(e)
{
    console.log(e, e.shiftKey)
},</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( options )</span> </span>{
        _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'render'</span>, <span class="hljs-string">'animate'</span>, <span class="hljs-string">'accessible'</span>, <span class="hljs-string">'loop'</span>  );
        <span class="hljs-keyword">this</span>.links = <span class="hljs-keyword">new</span> UW.QuickLinks.Collection( options )
        <span class="hljs-keyword">this</span>.links.on( <span class="hljs-string">'sync'</span>, <span class="hljs-keyword">this</span>.render )
    },

    render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(  )</span>
    </span>{
        <span class="hljs-keyword">this</span>.quicklinks = $ ( _.template( <span class="hljs-keyword">this</span>.template, { links : <span class="hljs-keyword">this</span>.links.toJSON() }) )</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>this.makeDrawer()</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>.$container = $(<span class="hljs-keyword">this</span>.container);
        <span class="hljs-keyword">this</span>.$container.prepend( <span class="hljs-keyword">this</span>.quicklinks )
        <span class="hljs-keyword">this</span>.$el.attr( <span class="hljs-string">'aria-controls'</span>, <span class="hljs-string">'quicklinks'</span> ).attr( <span class="hljs-string">'aria-owns'</span>, <span class="hljs-string">'quicklinks'</span> )
        UW.$body.on( <span class="hljs-string">'keyup'</span>, <span class="hljs-string">'#quicklinks a'</span>, <span class="hljs-keyword">this</span>.animate )
    },

    makeDrawer: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> $shortcuts = UW.$body.find(<span class="hljs-string">'a.screen-reader-shortcut'</span>).detach();
        UW.$body.children().not(<span class="hljs-string">'#wpadminbar'</span>).not(<span class="hljs-string">'script'</span>)
            .wrapAll(<span class="hljs-string">'&lt;div id="uw-container"&gt;'</span>)
            .wrapAll(<span class="hljs-string">'&lt;div id="uw-container-inner"&gt;'</span>);
        <span class="hljs-keyword">this</span>.$container = $(<span class="hljs-keyword">this</span>.container);
        <span class="hljs-keyword">this</span>.$container.prepend($shortcuts);
    },

    animate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( e )</span> </span>{
        e.preventDefault();

        <span class="hljs-keyword">if</span> ( e.keyCode &amp;&amp; e.keyCode != <span class="hljs-number">27</span> )
        {
            <span class="hljs-keyword">if</span> ( e.keyCode &amp;&amp; e.keyCode != <span class="hljs-number">13</span> ||
                e.keyCode &amp;&amp; e.keyCode != <span class="hljs-number">32</span> )
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }

        <span class="hljs-keyword">this</span>.$container.toggleClass(<span class="hljs-string">'open'</span>)
        <span class="hljs-keyword">this</span>.quicklinks.toggleClass(<span class="hljs-string">'open'</span>)

        <span class="hljs-keyword">this</span>.open = <span class="hljs-keyword">this</span>.quicklinks.hasClass( <span class="hljs-string">'open'</span> )

        _.delay( <span class="hljs-keyword">this</span>.accessible, <span class="hljs-keyword">this</span>.open ? <span class="hljs-keyword">this</span>.DELAY : <span class="hljs-number">0</span> )
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>todo : cache the uw-container-inner and screen-reader</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    accessible : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(argument)</span>
    </span>{
        <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'button'</span>).attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-keyword">this</span>.open )
        <span class="hljs-keyword">this</span>.quicklinks.attr(<span class="hljs-string">'aria-hidden'</span>,  ( ! <span class="hljs-keyword">this</span>.open ).toString() )
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.open ) {
            <span class="hljs-keyword">this</span>.quicklinks.find(<span class="hljs-string">'a'</span>).attr( <span class="hljs-string">'tabindex'</span>, <span class="hljs-number">0</span> ).first().focus()
           $(<span class="hljs-string">'#uw-container-inner'</span>).attr(<span class="hljs-string">'aria-hidden'</span>, <span class="hljs-literal">true</span>);
           $(<span class="hljs-string">'.screen-reader-shortcut'</span>).attr(<span class="hljs-string">'aria-hidden'</span>, <span class="hljs-literal">true</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.quicklinks.find(<span class="hljs-string">'a'</span>).attr( <span class="hljs-string">'tabindex'</span>, -<span class="hljs-number">1</span> )
            <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'button'</span>).focus()
           $(<span class="hljs-string">'#uw-container-inner'</span>).attr(<span class="hljs-string">'aria-hidden'</span>, <span class="hljs-literal">false</span>);
           $(<span class="hljs-string">'.screen-reader-shortcut'</span>).attr(<span class="hljs-string">'aria-hidden'</span>, <span class="hljs-literal">false</span>);
        }
    },

    loop : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event)</span> </span>{
        <span class="hljs-keyword">if</span>( <span class="hljs-keyword">this</span>.open ) <span class="hljs-keyword">this</span>.quicklinks.find(<span class="hljs-string">'li a'</span>).first().focus();
    }

});

UW.QuickLinks.Model = Backbone.Model.extend({});

UW.QuickLinks.Collection = Backbone.Collection.extend({

    model: UW.QuickLinks.Model,

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( options )</span>
    </span>{
        <span class="hljs-keyword">this</span>.url = options.url;
        <span class="hljs-keyword">this</span>.fetch()
    },

});
;<span class="hljs-comment">// ### UW Slideshow</span></pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>This function creates a UW Slideshow.
For usage please refer to the <a href="http://uw.edu/brand/web/#slideshow">UW Web Components Slideshow</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.Slideshow = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>The classname of the elements that will become slideshows</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  el : <span class="hljs-string">'.uw-slideshow'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>The <code>current</code> property indicates which slide number to animate in or out</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  current : <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>This is the template for the Previous and Next controls.
We’re using an Undercore template to simplify the slideshow’s markup.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  controls : <span class="hljs-string">''</span> +
    <span class="hljs-string">'&lt;a href="#" class="&lt;%= classname %&gt; next"&gt;&lt;/a&gt;'</span> +
    <span class="hljs-string">'&lt;a href="#" class="&lt;%= classname %&gt; previous"&gt;&lt;/a&gt;'</span>
  ,</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>This is a placeholder that is set to the final animation points for the slides
depending if they are animating in or animating out.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animation : {},</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>These are the basic animation settings and classes used in the slidesshow.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  settings : {
    slideclass : <span class="hljs-string">'.slide'</span>,
    controlclasses : {
      base : <span class="hljs-string">'uw-slideshow-controls'</span>,
      lastNext : <span class="hljs-string">'last-next'</span>,
      lastPrev : <span class="hljs-string">'last-previous'</span>
    },
    animationOptions : {
      easing : <span class="hljs-string">'easeOutQuint'</span>,
      duration : <span class="hljs-number">1200</span>,
      queue: <span class="hljs-literal">false</span>
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>The only events necessary are clicking the next and previous control arrows.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  events : {
    <span class="hljs-string">'click .previous'</span> : <span class="hljs-string">'animateIn'</span>,
    <span class="hljs-string">'click .next'</span> : <span class="hljs-string">'animateOut'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>When the view is initialized the controls are added to the dom, the number of slides is gathered,
and the z-index of the slides is reversed to keep the first image in the markup on top.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    <span class="hljs-keyword">this</span>.options = _.extend( {}, <span class="hljs-keyword">this</span>.settings, options )
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'animateIn'</span>, <span class="hljs-string">'animateOut'</span>, <span class="hljs-string">'addControls'</span>, <span class="hljs-string">'zIndex'</span> )
    <span class="hljs-keyword">this</span>.controls = _.template( <span class="hljs-keyword">this</span>.controls, { classname: <span class="hljs-keyword">this</span>.options.controlclasses.base } )
    <span class="hljs-keyword">this</span>.numberOfSlides = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.slide'</span>).length - <span class="hljs-number">1</span>
    <span class="hljs-keyword">this</span>.organizeSlideshow()
    <span class="hljs-keyword">this</span>.addControls()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Set the z-index of each slide appropriately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  organizeSlideshow : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>this.$( this.$(‘.slide’).get().reverse() ).each( this.zIndex )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    _.each( <span class="hljs-keyword">this</span>.$(<span class="hljs-string">'.slide'</span>).get(), <span class="hljs-keyword">this</span>.zIndex )</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>this.$( ‘.slide’ ).each( this.zIndex )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  },</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>Add the previous and next controls to the slideshow.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  addControls : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$el.append( <span class="hljs-keyword">this</span>.controls )
    <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-keyword">this</span>.options.controlclass )
    <span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-keyword">this</span>.options.controlclasses.lastPrev )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>When the <code>previous</code> control is clicked, this will animate a slide out of view into view.
The <code>current</code> property is adjusted twice to keep it bound to the number of slides.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animateIn : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
  </span>{
      <span class="hljs-keyword">this</span>.direction = <span class="hljs-string">'in'</span>
      <span class="hljs-keyword">this</span>.current = <span class="hljs-keyword">this</span>.current &lt; <span class="hljs-number">0</span> ? -<span class="hljs-number">1</span> : <span class="hljs-keyword">this</span>.current-<span class="hljs-number">1</span>
      <span class="hljs-keyword">this</span>.animation.textLeft = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.animation.imageLeft = <span class="hljs-number">0</span>
      <span class="hljs-keyword">this</span>.animate()
      <span class="hljs-keyword">this</span>.current = <span class="hljs-keyword">this</span>.current &lt; <span class="hljs-number">0</span> ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.current
      <span class="hljs-keyword">this</span>.toggleClasses()
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>When the <code>next</code> control is clicked, this will animate a slide in view out of view.
The <code>current</code> property is adjusted after animation to keep it bounded to the number of slides.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animateOut : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
  </span>{
      <span class="hljs-keyword">this</span>.direction = <span class="hljs-string">'out'</span>
      <span class="hljs-keyword">this</span>.animation.textLeft = <span class="hljs-string">'-200%'</span>
      <span class="hljs-keyword">this</span>.animation.imageLeft = <span class="hljs-string">'100%'</span>
      <span class="hljs-keyword">this</span>.animate()
      <span class="hljs-keyword">this</span>.current = <span class="hljs-keyword">this</span>.current === <span class="hljs-keyword">this</span>.numberOfSlides ? <span class="hljs-keyword">this</span>.numberOfSlides : <span class="hljs-keyword">this</span>.current+<span class="hljs-number">1</span>
      <span class="hljs-keyword">this</span>.toggleClasses()
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>This function animates the slides based on the values set by <code>animateIn</code> or <code>animateOut</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animate : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.nextSlideExists() )
    {
      <span class="hljs-keyword">this</span>.$( <span class="hljs-keyword">this</span>.options.slideclass ).eq( <span class="hljs-keyword">this</span>.current ).animate({left: <span class="hljs-keyword">this</span>.animation.imageLeft }, <span class="hljs-keyword">this</span>.options.animationOptions )
        .find(<span class="hljs-string">'div'</span>).animate({left: <span class="hljs-keyword">this</span>.animation.textLeft }, <span class="hljs-keyword">this</span>.options.animationOptions )
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>Toggle a slideshow class that will indicate when there are no more slides in that direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  toggleClasses : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.current === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.current === <span class="hljs-keyword">this</span>.numberOfSlides )
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-keyword">this</span>.direction === <span class="hljs-string">'out'</span> ? <span class="hljs-keyword">this</span>.options.controlclasses.lastNext : <span class="hljs-keyword">this</span>.options.controlclasses.lastPrev )

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$el.removeClass( <span class="hljs-keyword">this</span>.options.controlclasses.lastNext + <span class="hljs-string">' '</span> + <span class="hljs-keyword">this</span>.options.controlclasses.lastPrev )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>Check if the next slide exists. If it does animate. Otherwise, do not animate.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  nextSlideExists: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.current &lt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.direction === <span class="hljs-string">'in'</span> ||
         <span class="hljs-keyword">this</span>.current === <span class="hljs-keyword">this</span>.numberOfSlides &amp;&amp; <span class="hljs-keyword">this</span>.direction === <span class="hljs-string">'out'</span> )
           <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;


    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>Set the z-index of the slide based on its index in the DOM.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  zIndex : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( slide )</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>console.log( slide )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $( slide )
    $<span class="hljs-keyword">this</span>.css({ zIndex : -<span class="hljs-number">1</span> * $<span class="hljs-keyword">this</span>.index() + <span class="hljs-keyword">this</span>.numberOfSlides })
  }

})
;UW.YouTube = {};

UW.YouTube.Collection = Backbone.Collection.extend({

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> </span>{
        _(<span class="hljs-keyword">this</span>).bindAll(<span class="hljs-string">'parse'</span>);
        <span class="hljs-keyword">this</span>.el = options.el;
        <span class="hljs-keyword">this</span>.$el = $(<span class="hljs-keyword">this</span>.el);
        <span class="hljs-keyword">this</span>.youtube_id = <span class="hljs-keyword">this</span>.$el.data(<span class="hljs-string">'uw-youtube'</span>);
        <span class="hljs-keyword">this</span>.setup_for_type();
        <span class="hljs-keyword">this</span>.make_view();</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>this.extend(window.onYouTubeIframeAPIReady);  // not so easy as just that, but that’s the idea</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>.fetch({success: <span class="hljs-keyword">this</span>.view.onDataReady});
    },

    setup_for_type : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(youtube_id)</span> </span>{
        <span class="hljs-keyword">this</span>.type = <span class="hljs-keyword">this</span>.$el.data(<span class="hljs-string">'uw-youtube-type'</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.type == <span class="hljs-string">'playlist'</span>){
            <span class="hljs-keyword">this</span>.max_results = <span class="hljs-number">20</span>;
            <span class="hljs-keyword">var</span> max_results_temp = <span class="hljs-built_in">parseInt</span>(<span class="hljs-keyword">this</span>.$el.data(<span class="hljs-string">'max-results'</span>), <span class="hljs-number">10</span>);
            <span class="hljs-keyword">if</span> (max_results_temp &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">this</span>.max_results = max_results_temp;
            }
            <span class="hljs-keyword">this</span>.model = UW.YouTube.PlaylistItem;
            <span class="hljs-keyword">this</span>.url = <span class="hljs-string">'https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&amp;playlistId='</span> + <span class="hljs-keyword">this</span>.youtube_id + <span class="hljs-string">'&amp;key=AIzaSyApmhFr5oa8bmKPcpN7bm-h0mekjkUVypU&amp;maxResults='</span> + <span class="hljs-keyword">this</span>.max_results;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.type == <span class="hljs-string">'single'</span>) {
            <span class="hljs-keyword">this</span>.model = UW.YouTube.Video;
            <span class="hljs-keyword">this</span>.url = <span class="hljs-string">'https://www.googleapis.com/youtube/v3/videos?part=snippet&amp;id='</span> + <span class="hljs-keyword">this</span>.youtube_id + <span class="hljs-string">'&amp;key=AIzaSyApmhFr5oa8bmKPcpN7bm-h0mekjkUVypU'</span>;
        }
    },

    parse: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(response)</span> </span>{
        <span class="hljs-keyword">var</span> type = <span class="hljs-keyword">this</span>.type, youtube_id = <span class="hljs-keyword">this</span>.youtube_id;
        <span class="hljs-keyword">return</span> _(response.items).map(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(item)</span> </span>{
            <span class="hljs-keyword">if</span> (type == <span class="hljs-string">'single'</span>){
                item.snippet.resourceId = {videoId: youtube_id};
            }
            <span class="hljs-keyword">return</span> item.snippet;
        });
    },
    
    make_view: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(type)</span> </span>{
        <span class="hljs-keyword">this</span>.view = <span class="hljs-keyword">new</span> UW.YouTube.CollectionView({collection: <span class="hljs-keyword">this</span>});
    },

});

UW.YouTube.CollectionView = Backbone.View.extend({
    
    template : <span class="hljs-string">"&lt;div class='nc-video-player'&gt;&lt;div class='tube-wrapper'&gt;&lt;/div&gt;&lt;/div&gt;"</span>,
    playlist_section : <span class="hljs-string">"&lt;div class='vidSmall'&gt;&lt;div class='scrollbar'&gt;&lt;div class='track'&gt;&lt;div class='thumb'&gt;&lt;div class='end'&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class='viewport'&gt;&lt;div class='vidContent overview'&gt;&lt;ul&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span>,

    events: {
        <span class="hljs-string">'click a'</span>: <span class="hljs-string">'preview_clicked'</span>
    },

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        _(<span class="hljs-keyword">this</span>).bindAll(<span class="hljs-string">'onReady'</span>, <span class="hljs-string">'onDataReady'</span>, <span class="hljs-string">'onStateChange'</span>, <span class="hljs-string">'preview_clicked'</span>);
        <span class="hljs-keyword">this</span>.player_ready = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.data_ready = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.wrap();
        <span class="hljs-keyword">this</span>.add_iFrame_api();
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection.type == <span class="hljs-string">'playlist'</span>){
            <span class="hljs-keyword">this</span>.add_playlist_section();
        }
    },

    wrap: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.collection.$el.wrap($(<span class="hljs-keyword">this</span>.template));
        <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.collection.$el.parents(<span class="hljs-string">'.nc-video-player'</span>);  <span class="hljs-comment">//unattached jquery object won't wrap right if we add possible playlist section first</span>
        <span class="hljs-keyword">this</span>.el = <span class="hljs-keyword">this</span>.$el[<span class="hljs-number">0</span>];
    },

    add_iFrame_api: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (UW.$body.find(<span class="hljs-string">'script#iFrame'</span>).length === <span class="hljs-number">0</span>){
            UW.$body.append(<span class="hljs-string">'&lt;script id="iFrame" src="//www.youtube.com/player_api" type="text/javascript"&gt;&lt;/script&gt;'</span>);
            <span class="hljs-keyword">this</span>.add_iFrame_function();
        }
    },

    add_iFrame_function: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-built_in">window</span>.onYouTubeIframeAPIReady = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, length = UW.youtube.length; i &lt; length; i++){
                <span class="hljs-keyword">var</span> collection = UW.youtube[i];</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>attach the YT.player to the relevant view, each view gets one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                collection.view.uwplayer = <span class="hljs-keyword">new</span> YT.Player(collection.$el.attr(<span class="hljs-string">'id'</span>), {
                    videoId: <span class="hljs-string">''</span>,
                    events: {</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>these events will call functions in the relevant view</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                        <span class="hljs-string">'onReady'</span>: collection.view.onReady,
                        <span class="hljs-string">'onStateChange'</span>: collection.view.onStateChange
                    }
                });
            }
        };
    },

    add_playlist_section : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.$el.append(<span class="hljs-keyword">this</span>.playlist_section);
        <span class="hljs-keyword">this</span>.$vidSmall = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.vidSmall'</span>);
        <span class="hljs-keyword">this</span>.$vidContent = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'.vidContent'</span>);
    },

    onReady: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.player_ready = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">this</span>.check_all_ready();
    },

    onDataReady: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.data_ready = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection.type == <span class="hljs-string">'playlist'</span>){
            <span class="hljs-keyword">this</span>.$vidSmall.find(<span class="hljs-string">'.scrollbar'</span>).show();
            <span class="hljs-keyword">this</span>.$vidContent.width(<span class="hljs-keyword">this</span>.collection.models.length * <span class="hljs-number">135</span> + <span class="hljs-string">'px'</span>);
            <span class="hljs-keyword">this</span>.$vidSmall.tinyscrollbar({axis: <span class="hljs-string">'x'</span>});
        }
        <span class="hljs-keyword">this</span>.check_all_ready();
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>this function checks the state of data/player to prevent a race case. Both the data and the player must be ready to go.  Then we play the correct video</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    check_all_ready: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.data_ready &amp;&amp; <span class="hljs-keyword">this</span>.player_ready){
            <span class="hljs-keyword">this</span>.play(<span class="hljs-keyword">this</span>.collection.models[<span class="hljs-number">0</span>].get(<span class="hljs-string">'resourceId'</span>).videoId);
        } 
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>when the player changes state, this is run.  Currently stuff only happens if this is a playlist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    onStateChange: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.is_playlist) {</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>event.data is 0 when a video finishes playing.  Find out what video we just finished, then play the next one or loop back to the beginning of the playlist</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (event.data === <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">var</span> video = <span class="hljs-keyword">this</span>.$vidContent.find(<span class="hljs-string">'.vid-active'</span>).attr(<span class="hljs-string">'id'</span>);
                <span class="hljs-keyword">var</span> index = <span class="hljs-keyword">this</span>.video_ids.indexOf(video);
                <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-keyword">this</span>.video_ids.length - <span class="hljs-number">1</span>) {
                    <span class="hljs-keyword">this</span>.play(<span class="hljs-keyword">this</span>.video_ids[index + <span class="hljs-number">1</span>]);
                }
                <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>.play(<span class="hljs-keyword">this</span>.video_ids[<span class="hljs-number">0</span>]);
                }
            }
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>play the video id passed.  If ‘playnow’ not passed, assume false.  If ‘playnow’ is true play the video, otherwise just cue it up</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    play: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(id, playnow)</span></span>{
        playnow = playnow || <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">if</span> (playnow) {
            <span class="hljs-keyword">this</span>.uwplayer.loadVideoById(id);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.uwplayer.cueVideoById(id);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>If this is a playlist we must also manipulate the placeholder drawer.  Move the selected video’s placeholder to the front if we can, otherwise move the listas far as we can without creating whitespace.  Then visually distinguish the selected video’s placeholder</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.collection.type == <span class="hljs-string">'playlist'</span>) {
            <span class="hljs-keyword">var</span> $small = $(<span class="hljs-string">'#'</span> + id);
            <span class="hljs-keyword">var</span> leftpos = $small.position().left, $viewport = <span class="hljs-keyword">this</span>.$vidSmall.find(<span class="hljs-string">'.viewport'</span>);
            <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'a.vid-active'</span>).removeClass(<span class="hljs-string">'vid-active'</span>);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$vidContent.width() - leftpos &lt; $viewport.width()){
                leftpos = <span class="hljs-keyword">this</span>.$vidContent.width() - $viewport.width();
            }
            <span class="hljs-keyword">this</span>.$vidContent.animate({left: -leftpos}, <span class="hljs-number">500</span>);
            <span class="hljs-keyword">this</span>.$vidSmall.data(<span class="hljs-string">'plugin_tinyscrollbar'</span>).update(leftpos);
            $small.addClass(<span class="hljs-string">'vid-active'</span>);
        }
    },

    preview_clicked: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(event)</span> </span>{
        <span class="hljs-keyword">this</span>.play(event.currentTarget.id, <span class="hljs-literal">true</span>);
    }
});

UW.YouTube.Video = Backbone.Model.extend({
    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.get(<span class="hljs-string">'resourceId'</span>)){
            <span class="hljs-keyword">this</span>.view = <span class="hljs-keyword">new</span> UW.YouTube.VideoView({model: <span class="hljs-keyword">this</span>});
        }
    }
});

UW.YouTube.VideoView = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>template: underscore + html string here,</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    
    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.render();
    },

    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> item = <span class="hljs-keyword">this</span>.model.toJSON();</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>var small<em>vid = </em>.template(this.template, item);
this.model.collection.view.$vidSmall.append(small_vid);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    }
});

UW.YouTube.PlaylistItem = Backbone.Model.extend({
    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.get(<span class="hljs-string">'resourceId'</span>)){
            <span class="hljs-keyword">this</span>.view = <span class="hljs-keyword">new</span> UW.YouTube.PlaylistItemView({model:<span class="hljs-keyword">this</span>});
        }
    },
});

UW.YouTube.PlaylistItemView = Backbone.View.extend({
    template: <span class="hljs-string">"&lt;li&gt;&lt;a id='&lt;%= resourceId.videoId %&gt;' class='video'&gt;&lt;img src='&lt;%= thumbnails.default.url %&gt;'/&gt;&lt;div class='text'&gt;&lt;p class='title'&gt;&lt;%= title %&gt;&lt;/p&gt;&lt;/div&gt;&lt;/a&gt;&lt;/li&gt;"</span>,

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.$el = <span class="hljs-keyword">this</span>.model.collection.view.$vidContent.find(<span class="hljs-string">'ul'</span>);
        <span class="hljs-keyword">this</span>.render();
    },


    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> item = <span class="hljs-keyword">this</span>.model.toJSON();
        <span class="hljs-keyword">var</span> small_vid = _.template(<span class="hljs-keyword">this</span>.template, item);
        <span class="hljs-keyword">this</span>.$el.append(small_vid);
    },
});
;<span class="hljs-comment">// ### UW Vimeo</span></pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>This function creates the UW Vimeo player
For usage please refer to the <a href="http://uw.edu/brand/web/#vimeo">UW Web Vimeo Player</a>
TODO: Get postMessage to work after iframe has loaded or find the correct API postMessage</p>

            </div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <pre><code>  Single: <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uw-vimeo"</span> <span class="hljs-attribute">data-video</span>=<span class="hljs-value">76979871</span> <span class="hljs-attribute">data-width</span>=<span class="hljs-value">800</span> <span class="hljs-attribute">data-height</span>=<span class="hljs-value">500</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  Playlist :<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"uw-vimeo"</span> <span class="hljs-attribute">data-username</span>=<span class="hljs-value">uwathleticsmarketing</span> <span class="hljs-attribute">data-width</span>=<span class="hljs-value">800</span> <span class="hljs-attribute">data-height</span>=<span class="hljs-value">500</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span></span>
</code></pre>
            </div>
            
            <div class="content"><div class='highlight'><pre>

UW.Vimeo = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>The classname to look for when embedding Vimeo videos</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  el : <span class="hljs-string">'.uw-vimeo'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>List the events in the view.
Clicking a preview item will load that video</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  events : {
    <span class="hljs-string">'click .preview'</span> : <span class="hljs-string">'loadVideo'</span>,
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>The two templates necessary for the embed.
The first one is the standard Vimeo iFrame which is used for both single and playlist driven embeds.
The second one is the playlist and only shows if a playlist is being called.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  templates : {
    video    : <span class="hljs-string">'&lt;iframe id="test" src="http://player.vimeo.com/video/&lt;%= video %&gt;/?&lt;%= $.param( defaults ) %&gt;"'</span> +
               <span class="hljs-string">' width=&lt;%= width %&gt; height=&lt;%= height %&gt;'</span>+
               <span class="hljs-string">' frameborder=0 webkitallowfullscreen mozallowfullscreen allowfullscreen&gt;&lt;/iframe&gt;'</span>,

    playlist : <span class="hljs-string">''</span> +
      <span class="hljs-string">'&lt;div class="playlist"&gt;'</span>+
        <span class="hljs-string">'&lt;% _.each( videos, function( video ) { %&gt;'</span> +
          <span class="hljs-string">'&lt;div class="preview" data-id=&lt;%= video.id %&gt;&gt;'</span> +
            <span class="hljs-string">'&lt;img src="&lt;%= video.thumbnail_small %&gt;" height=75 width=100 title="&lt;%= video.title %&gt;"/&gt;'</span>+
          <span class="hljs-string">'&lt;/div&gt;'</span> +
        <span class="hljs-string">'&lt;% }) %&gt;'</span> +
      <span class="hljs-string">'&lt;/div&gt;'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>Default settings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  settings : {
    width  : <span class="hljs-number">580</span>,
    height : <span class="hljs-number">350</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>Default video attributes that cannot be overwritten</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  defaults : {
    api      : <span class="hljs-number">1</span>,
    title    : <span class="hljs-number">0</span>,
    portrait : <span class="hljs-number">0</span>,
    byline   : <span class="hljs-number">0</span>,
    color    : <span class="hljs-string">'4B2E82'</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>Initialize the video embeds.
Check to see if the <code>div.uw-vimeo</code> is requesting a single video or a playlist.
Note: Playlists are currently restricted to usernames.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'single'</span>, <span class="hljs-string">'playlist'</span>, <span class="hljs-string">'loadVideo'</span> )

    <span class="hljs-keyword">this</span>.options = _.extend( {}, <span class="hljs-keyword">this</span>.settings , <span class="hljs-keyword">this</span>.$el.data(), options )
    <span class="hljs-keyword">this</span>.options.defaults = <span class="hljs-keyword">this</span>.defaults

    <span class="hljs-keyword">this</span>.$el.width( <span class="hljs-keyword">this</span>.options.width )

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.video )
    {
      <span class="hljs-keyword">this</span>.video = <span class="hljs-keyword">new</span> UW.Vimeo.Video( <span class="hljs-keyword">this</span>.options.video )
      <span class="hljs-keyword">this</span>.video.on( <span class="hljs-string">'sync'</span>, <span class="hljs-keyword">this</span>.single )
    }

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.options.username )
    {
      <span class="hljs-keyword">this</span>.videos = <span class="hljs-keyword">new</span> UW.Vimeo.Playlist( { username : <span class="hljs-keyword">this</span>.options.username } )
      <span class="hljs-keyword">this</span>.videos.on( <span class="hljs-string">'sync'</span>, <span class="hljs-keyword">this</span>.playlist )
    }

  },</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>This loads the single video template and puts it into the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  single : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.player = _.template( <span class="hljs-keyword">this</span>.templates.video, <span class="hljs-keyword">this</span>.options )
    <span class="hljs-keyword">this</span>.$el.html( <span class="hljs-keyword">this</span>.player )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>This loads the playlist template and puts it into the DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  playlist : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{

    _.extend( <span class="hljs-keyword">this</span>.options, { video : <span class="hljs-keyword">this</span>.videos.first().get(<span class="hljs-string">'id'</span>) } )
    <span class="hljs-keyword">this</span>.player = _.template( <span class="hljs-keyword">this</span>.templates.video, <span class="hljs-keyword">this</span>.options )

    <span class="hljs-keyword">this</span>.videoList = _.template( <span class="hljs-keyword">this</span>.templates.playlist, { videos : <span class="hljs-keyword">this</span>.videos.toJSON() })

    <span class="hljs-keyword">this</span>.$el.html( <span class="hljs-keyword">this</span>.player )
    <span class="hljs-keyword">this</span>.$el.append( <span class="hljs-keyword">this</span>.videoList )

  },</pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>This loads a new video when a preview image is clicked.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  loadVideo : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">var</span> iframe = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'iframe'</span>)
      , params = _.last( iframe.attr(<span class="hljs-string">'src'</span>).split(<span class="hljs-string">'?'</span>) )
      , url = <span class="hljs-string">'http://player.vimeo.com/video/'</span> + $(e.currentTarget).data().id + <span class="hljs-string">'/?'</span> +params

    iframe.attr(<span class="hljs-string">'src'</span>, url)

    <span class="hljs-comment">/* iframe.get(0).contentWindow.postMessage({method:'play'}, url) */</span>

  }

})</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p>This is a model for a Vimeo video.
It takes its attributes from the Vimeo JSON API.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>UW.Vimeo.Video = Backbone.Model.extend({

  url : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">'http://vimeo.com/api/v2/video/'</span> + <span class="hljs-keyword">this</span>.video +<span class="hljs-string">'.json'</span>
  },

  parse : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span>
  </span>{
    <span class="hljs-keyword">return</span> _.first(data)
  },

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( video )</span>
  </span>{
    <span class="hljs-keyword">this</span>.video = video
    <span class="hljs-keyword">this</span>.fetch()
  }

})</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>This is a collection for a Vimeo feed
It takes its attributes from the Vimeo JSON API much like the <code>UW.Vimeo.Video</code> model does.
Only videos with the property of <code>{ embed_privacy : anywhere }</code> will be shown.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>UW.Vimeo.Playlist = Backbone.Collection.extend({

    url : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
    </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-string">'http://vimeo.com/api/v2/'</span>+ <span class="hljs-keyword">this</span>.username +<span class="hljs-string">'/videos.json'</span>
    },

    initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
    </span>{
      <span class="hljs-keyword">this</span>.username = options.username;
      <span class="hljs-keyword">this</span>.fetch()
    },

    parse : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( data )</span>
    </span>{
      <span class="hljs-keyword">return</span> _.where( data, { embed_privacy : <span class="hljs-string">'anywhere'</span> })
    }

})
;<span class="hljs-comment">/* RADIO PUBLIC CLASS DEFINITION
 * ============================== */</span>

UW.Radio = Backbone.View.extend({

  states :
  {
    checked  : <span class="hljs-string">'checked'</span>,
    disabled : <span class="hljs-string">'disabled'</span>
  },

  events :
  {
    <span class="hljs-string">'click input'</span> : <span class="hljs-string">'toggle'</span>
  },

  template: <span class="hljs-string">'&lt;span class="icons"&gt;&lt;span class="first-icon fui-radio-unchecked"&gt;&lt;/span&gt;&lt;span class="second-icon fui-radio-checked"&gt;&lt;/span&gt;&lt;/span&gt;'</span>,

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'toggle'</span>, <span class="hljs-string">'getGroup'</span>, <span class="hljs-string">'toggleCheckBox'</span> )

    <span class="hljs-keyword">this</span>.settings = _.extend( {}, <span class="hljs-keyword">this</span>.defaults , <span class="hljs-keyword">this</span>.$el.data() , options )

    <span class="hljs-keyword">this</span>.$el.before( <span class="hljs-keyword">this</span>.template )

    <span class="hljs-keyword">this</span>.$input = <span class="hljs-keyword">this</span>.$el

    <span class="hljs-keyword">this</span>.name   = <span class="hljs-keyword">this</span>.$el.attr( <span class="hljs-string">'name'</span> )

    <span class="hljs-keyword">this</span>.setElement( <span class="hljs-keyword">this</span>.$el.closest(<span class="hljs-string">'label'</span>) )

    <span class="hljs-keyword">this</span>.setState()
  },

  setState: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.$input.prop( <span class="hljs-keyword">this</span>.states.disabled ) ) <span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-keyword">this</span>.states.disabled )
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.$input.prop( <span class="hljs-keyword">this</span>.states.checked ) ) <span class="hljs-keyword">this</span>.$el.addClass( <span class="hljs-keyword">this</span>.states.checked )
  },

  getGroup : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> _.where( UW.radio, { name : <span class="hljs-keyword">this</span>.name })
  },

  toggle : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e )</span>
  </span>{
      _.each( <span class="hljs-keyword">this</span>.getGroup() , <span class="hljs-keyword">this</span>.toggleCheckBox )
  },

  toggleCheckBox : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( view )</span>
  </span>{
    <span class="hljs-keyword">var</span> checked  = view.$input.prop( <span class="hljs-keyword">this</span>.states.checked )
      , disabled = view.$input.prop( <span class="hljs-keyword">this</span>.states.disabled )

    <span class="hljs-keyword">if</span> ( ! disabled &amp;&amp;
          view.$el.removeClass( <span class="hljs-keyword">this</span>.states.checked ) )
        view.$el.removeAttr( <span class="hljs-keyword">this</span>.states.checked ).trigger( <span class="hljs-string">'change'</span> )

    <span class="hljs-keyword">if</span> ( ! disabled )
    {

      <span class="hljs-keyword">if</span> ( checked &amp;&amp; view.$el.addClass( <span class="hljs-keyword">this</span>.states.checked ) )
        view.$el.trigger( $.Event(<span class="hljs-string">'toggle'</span>) )

      <span class="hljs-keyword">if</span> ( checked !== view.$el.prop( <span class="hljs-keyword">this</span>.states.checked ) )
        view.$el.trigger( <span class="hljs-string">'change'</span> )

    }

  }

})
;<span class="hljs-comment">// ### UW Dropdowns</span></pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>This function creates the UW Dropdowns
For usage please refer to the <a href="http://uw.edu/brand/web/#dropdowns">UW Web Components Dropdowns</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>


UW.Dropdowns = Backbone.View.extend({

  chunkSize : <span class="hljs-number">8</span>,
  menuWidth : <span class="hljs-number">1170</span>,
  menuBlock : <span class="hljs-string">'&lt;div class="menu-block"&gt;&lt;/div&gt;'</span>,
  menuBlockWidth : <span class="hljs-number">250</span>,

  index : {
    topmenu : <span class="hljs-number">0</span>,
    submenu : <span class="hljs-number">0</span>
  },

  elements : {
    toplevel : <span class="hljs-string">'.dawgdrops-item'</span>
  },

  keys : {
    enter    :   <span class="hljs-number">13</span>,
    esc      :   <span class="hljs-number">27</span>,
    tab      :   <span class="hljs-number">9</span>,
    left     :   <span class="hljs-number">37</span>,
    up       :   <span class="hljs-number">38</span>,
    right    :   <span class="hljs-number">39</span>,
    down     :   <span class="hljs-number">40</span>,
    spacebar :   <span class="hljs-number">32</span>
  },


  events : {
    <span class="hljs-string">'keydown .dawgdrops-menu a'</span> : <span class="hljs-string">'moveFocusInSubMenu'</span>,
    <span class="hljs-string">'keydown .dawgdrops-item &gt; a'</span> : <span class="hljs-string">'toggleSubMenu'</span>,
    <span class="hljs-string">'mouseenter .dawgdrops-item'</span> : <span class="hljs-string">'positionSubmenu'</span>
  },


  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(options)</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'render'</span>, <span class="hljs-string">'chunk'</span>, <span class="hljs-string">'wrap'</span>, <span class="hljs-string">'wrapChildren'</span>, <span class="hljs-string">'positionSubmenu'</span>, <span class="hljs-string">'toggleSubMenu'</span> )
    <span class="hljs-keyword">this</span>.settings = _.extend( {}, <span class="hljs-keyword">this</span>.defaults , <span class="hljs-keyword">this</span>.$el.data() , options )
    <span class="hljs-keyword">this</span>.$topLevelNav = <span class="hljs-keyword">this</span>.$el.find( <span class="hljs-keyword">this</span>.elements.toplevel )
    <span class="hljs-keyword">this</span>.render()
  },

  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    _.each( <span class="hljs-keyword">this</span>.$topLevelNav, <span class="hljs-keyword">this</span>.wrapChildren )
  },

  chunk : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element, index )</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor( index / <span class="hljs-keyword">this</span>.chunkSize );
  },

  wrapChildren : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( element )</span>
  </span>{
    <span class="hljs-keyword">if</span> ( $(element).find(<span class="hljs-string">'li'</span>).length &gt; <span class="hljs-keyword">this</span>.chunkSize )
        _.each( _.groupBy( $( element ).find(<span class="hljs-string">'li'</span>), <span class="hljs-keyword">this</span>.chunk ), <span class="hljs-keyword">this</span>.wrap )
  },

  wrap : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( elements )</span>
  </span>{
      $( elements ).wrapAll( <span class="hljs-keyword">this</span>.menuBlock )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>todo: tidy up the math / variables</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  positionSubmenu : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( el )</span>
  </span>{
    <span class="hljs-keyword">var</span> $el = $(el.currentTarget)
      , position = $el.position()
      , menublock = $el.find(<span class="hljs-string">'.menu-block'</span>)
      , shift = ( <span class="hljs-keyword">this</span>.menuBlockWidth * ( menublock.length ) ) + position.left
      , left = shift &gt; <span class="hljs-keyword">this</span>.menuWidth ? position.left - ( shift - <span class="hljs-keyword">this</span>.menuWidth ) : position.left

    $el.find(<span class="hljs-string">'ul'</span>).css( { top : position.top + <span class="hljs-number">58</span>, left: left })
  },

  toggleSubMenu : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">switch</span> ( e.keyCode )
    {

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.enter :
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.down  :

        $(e.currentTarget).attr(<span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span>);
        <span class="hljs-keyword">this</span>.currentSubMenu = $(e.currentTarget).siblings(<span class="hljs-string">'ul'</span>)
        <span class="hljs-keyword">this</span>.currentSubMenuAnchors = <span class="hljs-keyword">this</span>.currentSubMenu.find(<span class="hljs-string">'a'</span>)

        <span class="hljs-keyword">this</span>.currentSubMenu
            .attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'true'</span> )
            .show()
          .find(<span class="hljs-string">'a'</span>)
            .eq(<span class="hljs-number">0</span>)
            .focus()

        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.left :
        $(e.currentTarget).parent().prev().children(<span class="hljs-string">'a'</span>).first().focus()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>


      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.right :
        $(e.currentTarget).parent().next().children(<span class="hljs-string">'a'</span>).first().focus()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.spacebar:
        <span class="hljs-built_in">window</span>.location.href = $(e.currentTarget).attr(<span class="hljs-string">'href'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

    }

  },

  moveFocusInSubMenu : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(e)</span>
  </span>{
    <span class="hljs-keyword">switch</span> ( e.keyCode ) {

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.tab:
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.currentSubMenu )
        {
          <span class="hljs-keyword">this</span>.currentSubMenu.hide()
          <span class="hljs-keyword">this</span>.currentSubMenu = <span class="hljs-literal">null</span>
          <span class="hljs-keyword">this</span>.index.submenu = <span class="hljs-number">0</span>
        }
        <span class="hljs-keyword">break</span>

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.down:
        <span class="hljs-keyword">this</span>.index.submenu = <span class="hljs-keyword">this</span>.index.submenu === <span class="hljs-keyword">this</span>.currentSubMenuAnchors.length-<span class="hljs-number">1</span> ? <span class="hljs-number">0</span> : <span class="hljs-keyword">this</span>.index.submenu + <span class="hljs-number">1</span>
        <span class="hljs-keyword">this</span>.currentSubMenuAnchors.eq( <span class="hljs-keyword">this</span>.index.submenu ).focus()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.up :
        <span class="hljs-keyword">this</span>.index.submenu = <span class="hljs-keyword">this</span>.index.submenu === <span class="hljs-number">0</span> ? <span class="hljs-keyword">this</span>.currentSubMenuAnchors.length-<span class="hljs-number">1</span> : <span class="hljs-keyword">this</span>.index.submenu - <span class="hljs-number">1</span>
        <span class="hljs-keyword">this</span>.currentSubMenuAnchors.eq( <span class="hljs-keyword">this</span>.index.submenu ).focus()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.left:
        <span class="hljs-keyword">this</span>.currentSubMenu.hide().parent().prev().children(<span class="hljs-string">'a'</span>).first().focus()
        <span class="hljs-keyword">this</span>.currentSubMenu.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> )
          .parent().children(<span class="hljs-string">'a'</span>).first().attr(<span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.right:
        <span class="hljs-keyword">this</span>.currentSubMenu.hide().parent().next().children(<span class="hljs-string">'a'</span>).first().focus()
        <span class="hljs-keyword">this</span>.currentSubMenu.attr( <span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> )
          .parent().children(<span class="hljs-string">'a'</span>).first().attr(<span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.spacebar:
      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.enter:
        <span class="hljs-built_in">window</span>.location.href = $(e.currentTarget).attr(<span class="hljs-string">'href'</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keys.esc:
        <span class="hljs-keyword">this</span>.currentSubMenu.attr(<span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span> )
          .hide().parent().children(<span class="hljs-string">'a'</span>).first().attr(<span class="hljs-string">'aria-expanded'</span>, <span class="hljs-string">'false'</span>).focus();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">var</span> chr = <span class="hljs-built_in">String</span>.fromCharCode(e.which)
        , exists = <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">this</span>.currentSubMenuAnchors.filter(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
          exists = <span class="hljs-keyword">this</span>.innerHTML.charAt(<span class="hljs-number">0</span>) === chr
          <span class="hljs-keyword">return</span> exists;
        }).first().focus();

        <span class="hljs-keyword">return</span> !exists;


    }
  }

})
;<span class="hljs-comment">// ### UW Dropdowns</span></pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>This function creates the UW mobile menu toggle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.MobileMenu = Backbone.View.extend({

  events: {
    <span class="hljs-string">'click'</span> : <span class="hljs-string">'toggle'</span>
  },

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    <span class="hljs-keyword">this</span>.settings = _.extend( {}, <span class="hljs-keyword">this</span>.defaults , <span class="hljs-keyword">this</span>.$el.data() , options )
    <span class="hljs-keyword">this</span>.$mobilemenu = <span class="hljs-keyword">this</span>.$el.siblings().first()
  },

  toggle: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$mobilemenu.toggle()
  }


})
;<span class="hljs-comment">// ### UW Accordion</span></pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>This creates a UW Accordion
For usage, refer to the <a href="http://uw.edu/brand/web#accordion">UW Web Components webpage</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.Accordion = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>what element becomes an accordion</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    el: <span class="hljs-string">'.uw-accordion'</span>,

    events: {
        <span class="hljs-string">'click h3'</span> : <span class="hljs-string">'animate'</span>
    },

    initialize: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        _.bindAll(<span class="hljs-keyword">this</span>, <span class="hljs-string">'animate'</span>);
        <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'h3'</span>).addClass(<span class="hljs-string">'inactive'</span>);
        <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'div'</span>).addClass(<span class="hljs-string">'inactive'</span>);
    },

    animate: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(e)</span> </span>{
        <span class="hljs-keyword">var</span> $target = $(e.target);
        <span class="hljs-keyword">if</span> ($target.hasClass(<span class="hljs-string">'inactive'</span>)) {
            <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'h3.active'</span>).removeClass(<span class="hljs-string">'active'</span>).addClass(<span class="hljs-string">'inactive'</span>);
            <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'div.active'</span>).animate({height: <span class="hljs-string">'0px'</span>}, <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
                $<span class="hljs-keyword">this</span>.removeClass(<span class="hljs-string">'active'</span>).addClass(<span class="hljs-string">'inactive'</span>);
                $<span class="hljs-keyword">this</span>.removeAttr(<span class="hljs-string">'style'</span>);
            });
            $target.removeClass(<span class="hljs-string">'inactive'</span>).addClass(<span class="hljs-string">'active'</span>);
            <span class="hljs-keyword">var</span> $next = $target.next(<span class="hljs-string">'div.inactive'</span>);
            $next.removeClass(<span class="hljs-string">'inactive'</span>).addClass(<span class="hljs-string">'active'</span>);
            <span class="hljs-keyword">var</span> $next_height = $next.outerHeight(<span class="hljs-literal">true</span>);
            $next.removeClass(<span class="hljs-string">'active'</span>);
            $next.animate({height: $next_height}, <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
                $next.addClass(<span class="hljs-string">'active'</span>);
                $next.removeAttr(<span class="hljs-string">'style'</span>);
            });
        }
        <span class="hljs-keyword">else</span> {
            $target.removeClass(<span class="hljs-string">'active'</span>).addClass(<span class="hljs-string">'inactive'</span>);
            $target.next(<span class="hljs-string">'div.active'</span>).animate({height: <span class="hljs-string">'0px'</span>}, <span class="hljs-number">500</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
                <span class="hljs-keyword">var</span> $<span class="hljs-keyword">this</span> = $(<span class="hljs-keyword">this</span>);
                $<span class="hljs-keyword">this</span>.removeClass(<span class="hljs-string">'active'</span>).addClass(<span class="hljs-string">'inactive'</span>);
                $<span class="hljs-keyword">this</span>.removeAttr(<span class="hljs-string">'style'</span>);
            });
        }
    },
});
;<span class="hljs-comment">// ### UW Select</span></pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>This function creates the UW select menu
For usage please refer to the <a href="http://uw.edu/brand/web/#select">UW Web Components Select</a>
data-submit=’true’ will cause the form to submit immediately
data-type=’links’ will cause the chosen option’s value (a url) to be visisted immediately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* TODO: add accessiblity attributes to the html markup
    step 1: don't hide the select, just put it off canvas.
    step 2: hide the ul from screen-readers and tab flow, leaving the select in the tab flow
    step 3: create a psuedo focus class that we can style like normal focus
    step 4: tie events from the select (like focus change or select) back to the ul visually
*/</span>

UW.Select = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>The class to look for when rendering UW select menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  el : <span class="hljs-string">'.uw-select'</span>,

  submit: <span class="hljs-literal">false</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>This property indicates the current index of the selected dropdown.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  current : <span class="hljs-number">0</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>Listing out the keys necessary for keyboard bindings.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  keyCodes :
  {
    enter: <span class="hljs-number">13</span>,
    spacebar : <span class="hljs-number">32</span>,
    tab : <span class="hljs-number">9</span>,
    up: <span class="hljs-number">38</span>,
    down: <span class="hljs-number">40</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>List the events within the view.
The two events needed trigger opening and closing the UW select menu</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  events :
  {
    <span class="hljs-string">'keydown li'</span>        : <span class="hljs-string">'openMenuOnKeydown'</span>,
    <span class="hljs-string">'click li.active'</span>   : <span class="hljs-string">'open'</span>,
    <span class="hljs-string">'click li.inactive'</span> : <span class="hljs-string">'close'</span>,
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>This is the template that replaces the standard select menu.
It will be placed after the select menu and mimics the values and
text for each option tag.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  template : <span class="hljs-string">'&lt;div class="uw-select-mask"&gt;'</span> +
              <span class="hljs-string">'&lt;ul class="uw-select"&gt;'</span> +
               <span class="hljs-string">'&lt;% _.each( lis, function( title, value ) { %&gt;'</span> +
                 <span class="hljs-string">'&lt;li data-value="&lt;%= value %&gt;"&gt;&lt;a href="#"&gt;&lt;%= title %&gt;&lt;/a&gt;&lt;/li&gt;'</span> +
               <span class="hljs-string">'&lt;% }) %&gt;'</span>+
               <span class="hljs-string">'&lt;/ul&gt;'</span> +
               <span class="hljs-string">'&lt;span class="uw-select-arrow"&gt;&lt;/span&gt;'</span> +
             <span class="hljs-string">'&lt;/div&gt;'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>Initialize the view, parse the standard select menu and render the UW select menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'open'</span>, <span class="hljs-string">'close'</span>, <span class="hljs-string">'addOpenClass'</span>, <span class="hljs-string">'removeOpenClass'</span> )
    <span class="hljs-keyword">this</span>.options = _.extend( {}, <span class="hljs-keyword">this</span>.settings, <span class="hljs-keyword">this</span>.$el.data() , options )
    <span class="hljs-keyword">this</span>.parseSelect()
    <span class="hljs-keyword">this</span>.render()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>Open the UW select menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  open : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.addOpenClass()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>Close the UW select menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  close : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">this</span>.clicked = <span class="hljs-literal">true</span>
    <span class="hljs-keyword">this</span>.$target = $(e.currentTarget)
    <span class="hljs-keyword">this</span>.current = <span class="hljs-keyword">this</span>.$target.index()
    <span class="hljs-keyword">this</span>.animate()
    <span class="hljs-keyword">this</span>.toggleLIClasses()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>Animate the select menu to the proper menu item.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  animate : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.scroll = <span class="hljs-keyword">this</span>.$target.offset().top - <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).first().offset().top;</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>var current_top = this.$el.position().top;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>.$el.animate( { scrollTop : <span class="hljs-keyword">this</span>.scroll }, { queue: <span class="hljs-literal">false</span>, complete: <span class="hljs-keyword">this</span>.removeOpenClass } )</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>this.$el.animate( { top : current_top - (this.$target.offset().top - this.$el.find(‘li.active’).offset().top) }, { queue: false, complete: this.removeOpenClass } )</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  },</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>Whenever an item is clicked on the UW select menu make sure the standard
select menu is set to that value as well.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  cloneSelectEvents : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">var</span> value = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).eq( <span class="hljs-keyword">this</span>.current ).data().value;
    <span class="hljs-keyword">this</span>.$select.val( value );
    <span class="hljs-keyword">this</span>.$select.find(<span class="hljs-string">'option[value="'</span> + value + <span class="hljs-string">'"]'</span>).prop(<span class="hljs-string">'selected'</span>, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.submit){
        <span class="hljs-keyword">this</span>.$select.parent(<span class="hljs-string">'form'</span>).submit();
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.trigger_link){
        <span class="hljs-built_in">window</span>.location = value;
    }

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.$select.hasClass(<span class="hljs-string">'uw-select-wp'</span>) )
      <span class="hljs-built_in">window</span>.location = UW.baseUrl + <span class="hljs-string">'?cat='</span> + value;

  },</pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>Render the UW select menu HTML and then set the view’s element to the newly
rendered HTML.
This also keeps a cached version of the select menu with the <code>this.$select</code> property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.html = _.template( <span class="hljs-keyword">this</span>.template, { lis : <span class="hljs-keyword">this</span>.LIs } )
    <span class="hljs-keyword">this</span>.$el.hide().after( <span class="hljs-keyword">this</span>.html )
    <span class="hljs-keyword">this</span>.$select = <span class="hljs-keyword">this</span>.$el
    <span class="hljs-keyword">this</span>.setElement( <span class="hljs-keyword">this</span>.$el.next().children(<span class="hljs-string">'ul'</span>) )
    <span class="hljs-keyword">this</span>.toggleLIClasses()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>Parse the standard select element and gather each option tags’ values and text</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  parseSelect : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">var</span> values  = _.map( <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'option'</span>), <span class="hljs-keyword">this</span>.getValue )
      , titles  = _.map( <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'option'</span>), <span class="hljs-keyword">this</span>.getText );
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el.data(<span class="hljs-string">'submit'</span>)) {
        <span class="hljs-keyword">this</span>.submit = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$el.data(<span class="hljs-string">'type'</span>) == <span class="hljs-string">'links'</span>) {
        <span class="hljs-keyword">this</span>.trigger_link = <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">this</span>.current = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">':selected'</span>).index()
    <span class="hljs-keyword">this</span>.LIs    = _.object( values, titles )
  },

  toggleLIClasses : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).removeClass().addClass(<span class="hljs-string">'inactive'</span>)
    <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).eq( <span class="hljs-keyword">this</span>.current ).removeClass().addClass(<span class="hljs-string">'active'</span>)
  },

  addOpenClass : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
      <span class="hljs-keyword">this</span>.$el.addClass(<span class="hljs-string">'open'</span>);
      <span class="hljs-keyword">this</span>.$el.scrollTop(<span class="hljs-keyword">this</span>.scroll);
  },

  removeOpenClass : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( forced )</span>
  </span>{
    <span class="hljs-keyword">this</span>.cloneSelectEvents()
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.clicked || forced )
    {
    <span class="hljs-keyword">this</span>.$el.removeClass(<span class="hljs-string">'open'</span>)
      <span class="hljs-keyword">this</span>.clicked = <span class="hljs-literal">false</span>;
    }
  },

  getText  : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( option )</span>
  </span>{
    <span class="hljs-keyword">return</span> $(option).text()
  },

  getValue : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( option )</span>
  </span>{
    <span class="hljs-keyword">return</span> option.value
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>This makes the dropdown accessible to keyboard bindings.
The behavior is the same as the default behavior for a standard select menu.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  openMenuOnKeydown : <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">( e )</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>If the user tabs while the menu is not open then continue the focus to
the next element on the page.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ( e.keyCode == <span class="hljs-keyword">this</span>.keyCodes.tab &amp;&amp; ! <span class="hljs-keyword">this</span>.isOpen() )
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>If the user clicks a certain set of keys then proceed with the necessary
actions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ( _.contains( <span class="hljs-keyword">this</span>.keyCodes, e.keyCode ) )
    {
      <span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">this</span>.isOpen() ) <span class="hljs-keyword">this</span>.open()
      <span class="hljs-keyword">switch</span> ( e.keyCode )
      {

        <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keyCodes.down :
          <span class="hljs-keyword">this</span>.down()
          <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keyCodes.up :
          <span class="hljs-keyword">this</span>.up()
          <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>The spacebar and enter keys need to open the the inital</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keyCodes.enter:
        <span class="hljs-keyword">case</span> <span class="hljs-keyword">this</span>.keyCodes.spacebar :
          <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.current != <span class="hljs-keyword">this</span>.$select.val() ) {
            <span class="hljs-keyword">this</span>.removeOpenClass( <span class="hljs-literal">true</span> )
            <span class="hljs-keyword">this</span>.toggleLIClasses()
            <span class="hljs-keyword">this</span>.cloneSelectEvents()
          }
          <span class="hljs-keyword">break</span>;

      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>Moves the menu up one when the up arrow is pressed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  up : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.atEdge( <span class="hljs-string">'up'</span> ) ) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">this</span>.current -= <span class="hljs-number">1</span>
    <span class="hljs-keyword">this</span>.move()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>Moves the menu down one when the down arrow is pressed.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  down : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.atEdge( <span class="hljs-string">'down'</span> ) ) <span class="hljs-keyword">return</span>
    <span class="hljs-keyword">this</span>.current += <span class="hljs-number">1</span>
    <span class="hljs-keyword">this</span>.move()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>Aniamtes the select menu when either arrow is pressed in the proper direction.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  move : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">this</span>.$target = <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).eq(<span class="hljs-keyword">this</span>.current)
    <span class="hljs-keyword">this</span>.$target.find(<span class="hljs-string">'a'</span>).focus()
    <span class="hljs-keyword">this</span>.animate()
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>This function checks to see if the the first or last item in the list is highlighted.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  atEdge : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( direction )</span>
  </span>{
    <span class="hljs-keyword">return</span> ( <span class="hljs-keyword">this</span>.current === <span class="hljs-number">0</span> &amp;&amp; direction === <span class="hljs-string">'up'</span> ||
             <span class="hljs-keyword">this</span>.current === <span class="hljs-keyword">this</span>.$el.find(<span class="hljs-string">'li'</span>).length - <span class="hljs-number">1</span> &amp;&amp; direction === <span class="hljs-string">'down'</span> )
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>Check to see if the menu is open.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  isOpen : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$el.hasClass(<span class="hljs-string">'open'</span>)
  }

})
;UW.Image = Backbone.View.extend({

  RATIO : <span class="hljs-number">0.8</span>,

  template : <span class="hljs-string">'&lt;div class="uw-overlay"&gt;'</span> +
                    <span class="hljs-string">'&lt;div&gt;&lt;/div&gt;'</span> +
                    <span class="hljs-string">'&lt;div class="wrapper" style="width:&lt;%= width %&gt;px; margin-top:-&lt;%= height/2 %&gt;px; margin-left:-&lt;%= width/2 %&gt;px;"&gt;'</span> +
                     <span class="hljs-string">'&lt;span class="close"&gt; Close&lt;/span&gt;'</span> +
                     <span class="hljs-string">'&lt;img src="&lt;%= src %&gt;" alt="&lt;%=alt %&gt;" style="width:100%;" /&gt;'</span> +
                     <span class="hljs-string">'&lt;p&gt;&lt;%= caption %&gt;&lt;/p&gt;'</span> +
                     <span class="hljs-string">'&lt;p&gt;&lt;%= credit %&gt;&lt;/p&gt;'</span> +
                   <span class="hljs-string">'&lt;/div&gt;'</span> +
                 <span class="hljs-string">'&lt;/div&gt;'</span>,

  events : {
    <span class="hljs-string">'click'</span> : <span class="hljs-string">'fetchImage'</span>
  },

  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    _.bindAll( <span class="hljs-keyword">this</span>, <span class="hljs-string">'fetchImage'</span>, <span class="hljs-string">'overlay'</span> , <span class="hljs-string">'render'</span> )
  },

  fetchImage : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
    <span class="hljs-keyword">this</span>.attrs = <span class="hljs-keyword">this</span>.getAttributes( e )
    $(<span class="hljs-string">'&lt;img src="'</span>+ <span class="hljs-keyword">this</span>.attrs.src +<span class="hljs-string">'"/&gt;'</span>).imagesLoaded( <span class="hljs-keyword">this</span>.overlay )
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  overlay : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( images )</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>todo make this quicker</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> ( images.hasAnyBroken ) {
      <span class="hljs-built_in">window</span>.location = <span class="hljs-keyword">this</span>.attrs.src;
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">this</span>.image = _.first( images.images )
    <span class="hljs-keyword">this</span>.attrs.height = <span class="hljs-keyword">this</span>.image.img.height
    <span class="hljs-keyword">this</span>.attrs.width  = <span class="hljs-keyword">this</span>.image.img.width

    <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.image.img.height &gt; UW.$<span class="hljs-built_in">window</span>.height() ||
          <span class="hljs-keyword">this</span>.image.img.width &gt; UW.$<span class="hljs-built_in">window</span>.width() )
    {
      <span class="hljs-keyword">this</span>.attrs.height = <span class="hljs-keyword">this</span>.RATIO * UW.$<span class="hljs-built_in">window</span>.height()
      <span class="hljs-keyword">this</span>.attrs.width  = <span class="hljs-keyword">this</span>.RATIO * UW.$<span class="hljs-built_in">window</span>.width()
    }

    <span class="hljs-keyword">this</span>.render()

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  render : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    UW.$body.one( <span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.remove )
    <span class="hljs-keyword">return</span>  UW.$body.append( _.template( <span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.attrs ) )
  },

  remove : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span>
  </span>{
    UW.$body.find( <span class="hljs-string">'.uw-overlay'</span> ).remove()
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  },

  getAttributes: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( e )</span>
  </span>{
      <span class="hljs-keyword">var</span> target = $(e.currentTarget)
      <span class="hljs-keyword">return</span> {
        src : target.parent(<span class="hljs-string">'a'</span>).attr(<span class="hljs-string">'href'</span>),
        alt : target.attr(<span class="hljs-string">'alt'</span>),
        caption : target.parent(<span class="hljs-string">'a'</span>).siblings(<span class="hljs-string">'.wp-caption-text'</span>).text(),
        credit : target.parent(<span class="hljs-string">'a'</span>).siblings(<span class="hljs-string">'.wp-caption-text'</span>).find(<span class="hljs-string">'.wp-media-credit'</span>).text()
      }

  }

})
;<span class="hljs-comment">// ### UW HTML5 Player</span></pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>This function creates a UW HTML5 player
For usage please refer to the <a href="http://uw.edu/brand/web/#player">UW Web Components Player</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.Player = Backbone.View.extend({

  defaults : {

  },

  initialize: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>_.bindAll( this )</p>

            </div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>this.settings = _.extend( {}, this.defaults , this.$el.data() , options )</p>

            </div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>console.log(videojs);</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>

  }


})
;<span class="hljs-comment">// ### UW Social</span></pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>This function creates the UW social media buttons
For usage please refer to the <a href="http://uw.edu/brand/web/#social">UW Web Components Social</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
UW.Social = Backbone.View.extend({</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>The classname of the elements that will become a set of social buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  el : <span class="hljs-string">'.uw-social'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>The template that generates the social buttons. Only the chosen buttons are rendered.
See the <a href="http://uw.edu/brand/#social">UW Web Components</a> for instructions on how to choose each button.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  template : <span class="hljs-string">'&lt;ul&gt;'</span> +
              <span class="hljs-string">'&lt;% if ( _.isString( facebook ) ) { %&gt; &lt;li&gt;&lt;a class="uw-social-facebook" href="http://www.facebook.com/sharer.php?u=&lt;%= url %&gt;"&gt;Facebook&lt;/a&gt;&lt;/li&gt; &lt;% } %&gt;'</span> +
              <span class="hljs-string">'&lt;% if ( _.isString( twitter ) ) { %&gt; &lt;li&gt;&lt;a class="uw-social-twitter" href="http://twitter.com/?status=&lt;%= url %&gt;"&gt;Twitter&lt;/a&gt;&lt;/li&gt; &lt;% } %&gt;'</span> +
              <span class="hljs-string">'&lt;% if ( _.isString( reddit ) ) { %&gt; &lt;li&gt;&lt;a class="uw-social-reddit" href="http://reddit.com/submit?url=&lt;%= url %&gt;"&gt;Reddit&lt;/a&gt;&lt;/li&gt; &lt;% } %&gt;'</span> +
              <span class="hljs-string">'&lt;% if ( _.isString( digg ) ) { %&gt; &lt;li&gt;&lt;a class="uw-social-reddit" href="http://digg.com/submit?url=&lt;%= url %&gt;"&gt;Digg&lt;/a&gt;&lt;/li&gt; &lt;% } %&gt;'</span> +
              <span class="hljs-string">'&lt;% if ( _.isString( stumbleupon ) ) { %&gt; &lt;li&gt;&lt;a class="uw-social-reddit" href="http://www.stumbleupon.com/submit?url=&lt;%= url %&gt;"&gt;StumbleUpon&lt;/a&gt;&lt;/li&gt; &lt;% } %&gt;'</span> +
             <span class="hljs-string">'&lt;/ul&gt;'</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>Default list of compatible buttons</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  settings : {
    facebook    : <span class="hljs-literal">false</span>,
    twitter     : <span class="hljs-literal">false</span>,
    reddit      : <span class="hljs-literal">false</span>,
    digg        : <span class="hljs-literal">false</span>,
    stumbleupon : <span class="hljs-literal">false</span>,
    url         : <span class="hljs-built_in">document</span>.URL
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Initialize and render the button view. The data attributes of <code>div.uw-social</code> will be parsed and used to determine which buttons to render.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  initialize : <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">( options )</span>
  </span>{
    <span class="hljs-keyword">this</span>.options = _.extend( {}, <span class="hljs-keyword">this</span>.settings, <span class="hljs-keyword">this</span>.$el.data() , options )
    <span class="hljs-keyword">this</span>.buttons = _.template( <span class="hljs-keyword">this</span>.template, <span class="hljs-keyword">this</span>.options )
    <span class="hljs-keyword">this</span>.$el.html( <span class="hljs-keyword">this</span>.buttons )
  },

})
;}).call(<span class="hljs-keyword">this</span>)</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
